<!doctype html><html lang=en data-figures class=page><head><title>Design Patterns | GitOrko</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta http-equiv=x-ua-compatible content="IE=edge"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-137709172-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-137709172-1")</script><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta name=description content="Design Patterns"><meta name=twitter:card content="summary"><meta name=twitter:creator content="@janedoe"><meta name=twitter:title content="Design Patterns"><meta name=twitter:image content="https://gitorko.github.io/images/thumbnail.png"><meta property="og:url" content="https://gitorko.github.io/post/design-patterns/"><meta property="og:title" content="Design Patterns"><meta property="og:description" content="Design Patterns"><meta property="og:image" content="https://gitorko.github.io/images/thumbnail.png"><link rel=apple-touch-icon sizes=180x180 href=https://gitorko.github.io/icons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://gitorko.github.io/icons/favicon-32x32.png><link rel=manifest href=https://gitorko.github.io/icons/site.webmanifest><link rel=canonical href=https://gitorko.github.io/post/design-patterns/><link rel=preload href=https://gitorko.github.io/css/styles.42e2c5f6d8cf9c52872666f8d8b2678ad0c426978b9d78aff3c33b7a1e7f6f97f54bcdaf0518a25fb0fe26367d04f8b07c683b3b38b331cb098daadee06b1f3e.css integrity="sha512-QuLF9tjPnFKHJmb42LJnitDEJpeLnXiv88M7eh5/b5f1S82vBRiiX7D+JjZ9BPiwfGg7OzizMcsJjare4GsfPg==" as=style crossorigin=anonymous><link rel=preload href=https://gitorko.github.io/en/js/bundle.916713af316e781a9177cd866fbe6e5bdc74617a387c1b7576f03afca70cfbe7d3d9b76ef311fbec6a2f92e523479573d41577c92936fbdb1b3638cec3e0e4e6.js as=script integrity="sha512-kWcTrzFueBqRd82Gb75uW9x0YXo4fBt1dvA6/KcM++fT2bdu8xH77GovkuUjR5Vz1BV3ySk2+9sbNjjOw+Dk5g==" crossorigin=anonymous><link rel=stylesheet type=text/css href=https://gitorko.github.io/css/styles.42e2c5f6d8cf9c52872666f8d8b2678ad0c426978b9d78aff3c33b7a1e7f6f97f54bcdaf0518a25fb0fe26367d04f8b07c683b3b38b331cb098daadee06b1f3e.css integrity="sha512-QuLF9tjPnFKHJmb42LJnitDEJpeLnXiv88M7eh5/b5f1S82vBRiiX7D+JjZ9BPiwfGg7OzizMcsJjare4GsfPg==" crossorigin=anonymous></head><body data-code=7 data-lines=false id=documentTop data-lang=en><header class=nav_header><nav class=nav><a href=https://gitorko.github.io/ class="nav_brand nav_item" title=GitOrko><img src=https://gitorko.github.io/images/logo.png class=logo alt=GitOrko><div class=nav_close><div><svg class="icon"><title>open-menu</title><use xlink:href="#open-menu"/></svg><svg class="icon"><title>closeme</title><use xlink:href="#closeme"/></svg></div></div></a><div class='nav_body nav_body_left'><div class=nav_parent><a href=https://gitorko.github.io/ class=nav_item title=Home>Home</a></div><div class=nav_parent><a href=https://github.com/gitorko class=nav_item title=About>About</a></div><div class=follow><a href=https://github.com/gitorko><svg class="icon"><title>github</title><use xlink:href="#github"/></svg></a><a href=https://www.linkedin.com/in/arjunsurendra/><svg class="icon"><title>linkedin</title><use xlink:href="#linkedin"/></svg></a><a href=https://gitorko.github.io/index.xml><svg class="icon"><title>rss</title><use xlink:href="#rss"/></svg></a><div class=color_mode><input type=checkbox class=color_choice id=mode></div></div></div></nav></header><main><div class="grid-inverse wrap content"><article class=post_content><h1 class=post_title>Design Patterns</h1><div class=post_meta><span><svg class="icon"><title>calendar</title><use xlink:href="#calendar"/></svg></span><span class=post_date>Jul 30, 2018</span>
<span class=post_time>· 40 min read</span><span>&nbsp;· <a href=https://gitorko.github.io/tags/design-pattern/ title=design-pattern class="post_tag button button_translucent">design-pattern</a></span>
<span class=page_only>&nbsp;·<div class=post_share>Share on:
<a href="https://twitter.com/intent/tweet?text=Design%20Patterns&url=https%3a%2f%2fgitorko.github.io%2fpost%2fdesign-patterns%2f&tw_p=tweetbutton" class=twitter title="Share on Twitter" target=_blank rel=nofollow><svg class="icon"><title>twitter</title><use xlink:href="#twitter"/></svg></a><a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fgitorko.github.io%2fpost%2fdesign-patterns%2f&t=Design%20Patterns" class=facebook title="Share on Facebook" target=_blank rel=nofollow><svg class="icon"><title>facebook</title><use xlink:href="#facebook"/></svg></a><a href=#linkedinshare id=linkedinshare class=linkedin title="Share on LinkedIn" rel=nofollow><svg class="icon"><title>linkedin</title><use xlink:href="#linkedin"/></svg></a><a href=https://gitorko.github.io/post/design-patterns/ title="Copy Link" class="link link_yank"><svg class="icon"><title>copy</title><use xlink:href="#copy"/></svg></a></div></span></div><div class=post_toc><h2>Overview</h2><nav id=TableOfContents><ul><li><a href=#creational-design-patterns>Creational Design Patterns</a><ul><li><a href=#1-singleton-pattern>1. Singleton Pattern</a></li><li><a href=#2-factory-pattern>2. Factory Pattern</a></li><li><a href=#3-abstract-factory-pattern>3. Abstract Factory Pattern</a></li><li><a href=#4-builder-pattern>4. Builder Pattern</a></li><li><a href=#5-prototype-pattern>5. Prototype Pattern</a></li></ul></li><li><a href=#structural-design-patterns>Structural Design Patterns</a><ul><li><a href=#1-adapter-pattern>1. Adapter Pattern</a></li><li><a href=#2-composite-pattern>2. Composite Pattern</a></li><li><a href=#3-proxy-pattern>3. Proxy Pattern</a></li><li><a href=#4-flyweight-pattern>4. Flyweight Pattern</a></li><li><a href=#5-facade-pattern>5. Facade Pattern</a></li><li><a href=#6-bridge-pattern>6. Bridge Pattern</a></li><li><a href=#7-decorator-pattern>7. Decorator Pattern</a></li></ul></li><li><a href=#behavioral-design-patterns>Behavioral Design Patterns</a><ul><li><a href=#1-template-pattern>1. Template Pattern</a></li><li><a href=#2-mediator-pattern>2. Mediator Pattern</a></li><li><a href=#3-chain-of-responsibility-pattern>3. Chain of Responsibility Pattern</a></li><li><a href=#4-observer-pattern>4. Observer Pattern</a></li><li><a href=#5-strategy-pattern>5. Strategy Pattern</a></li><li><a href=#6-command-pattern>6. Command Pattern</a></li><li><a href=#7-state-pattern>7. State Pattern</a></li><li><a href=#8-visitor-pattern>8. Visitor Pattern</a></li><li><a href=#9-interpreter-pattern>9. Interpreter Pattern</a></li><li><a href=#10-iterator-pattern>10. Iterator Pattern</a></li><li><a href=#11-memento-pattern>11. Memento Pattern</a></li></ul></li><li><a href=#differences>Differences</a><ul><li><a href=#1-difference-between-bridge-pattern-and-adapter-pattern>1. Difference between bridge pattern and adapter pattern</a></li><li><a href=#2-difference-between-mediator-pattern-and-observer-pattern>2. Difference between mediator pattern and observer pattern</a></li><li><a href=#3-difference-between-chain-of-responsibility-and-command-pattern>3. Difference between chain of responsibility and command pattern</a></li><li><a href=#4-difference-between-adapter-pattern-and-decorator-pattern>4. Difference between adapter pattern and decorator pattern</a></li><li><a href=#5-difference-between-adapter-pattern-and-facade-pattern>5. Difference between adapter pattern and facade pattern</a></li></ul></li></ul></nav></div><div class=post_body><p>Java Design Patterns - Creational, Structural & Behavioral design patterns.</p><p>Github: <a href=https://github.com/gitorko/project62>https://github.com/gitorko/project62</a></p><h2 id=creational-design-patterns>Creational Design Patterns</h2><p>Provides way to create objects while hiding the creation logic.</p><h3 id=1-singleton-pattern>1. Singleton Pattern</h3><p>Singleton pattern ensures that only one instance of the class exists in the java virtual machine.</p><p>A singleton class has these common features</p><ul><li>private constructor to restrict creation of instance by other classes.</li><li>private static variable of the same class.</li><li>public static method to get instance of class.</li></ul><p>We will first look at eager loaded singleton. This is costly as object is created at time of class loading,also no scope for exception handling if instantiation fails.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.singleton</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>EagerLoadedSingleton</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>EagerLoadedSingleton</span> <span class=n>instance</span> <span class=o>=</span> <span class=k>new</span> <span class=n>EagerLoadedSingleton</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=kd>private</span> <span class=nf>EagerLoadedSingleton</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>EagerLoadedSingleton</span><span class=o>.</span><span class=na>getInstance</span><span class=o>().</span><span class=na>hello</span><span class=o>());</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>
</span></span><span class=line><span class=ln>14</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>EagerLoadedSingleton</span> <span class=nf>getInstance</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>        <span class=k>return</span> <span class=n>instance</span><span class=o>;</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>
</span></span><span class=line><span class=ln>18</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>hello</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>        <span class=k>return</span> <span class=o>(</span><span class=s>&#34;Hello from EagerLoadedSingleton!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>21</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>This can be modified to static block singleton which provides room for handling exception.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.singleton</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>StaticBlockSingleton</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>StaticBlockSingleton</span> <span class=n>instance</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=kd>static</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>        <span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>            <span class=n>instance</span> <span class=o>=</span> <span class=k>new</span> <span class=n>StaticBlockSingleton</span><span class=o>();</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>        <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>Exception</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=n>RuntimeException</span><span class=o>(</span><span class=s>&#34;Exception occured in creatingsingleton instance&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>
</span></span><span class=line><span class=ln>15</span><span class=cl>    <span class=kd>private</span> <span class=nf>StaticBlockSingleton</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>
</span></span><span class=line><span class=ln>18</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>StaticBlockSingleton</span><span class=o>.</span><span class=na>getInstance</span><span class=o>().</span><span class=na>hello</span><span class=o>());</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>
</span></span><span class=line><span class=ln>22</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>StaticBlockSingleton</span> <span class=nf>getInstance</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>        <span class=k>return</span> <span class=n>instance</span><span class=o>;</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>
</span></span><span class=line><span class=ln>26</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>hello</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>        <span class=k>return</span> <span class=o>(</span><span class=s>&#34;Hello from StaticBlockSingleton!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>29</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>The next step is to use lazy initialization singleton as creating singleton at class loading time and not using it will be costly.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.singleton</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>LazyLoadedSingleton</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=n>LazyLoadedSingleton</span> <span class=n>instance</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=kd>private</span> <span class=nf>LazyLoadedSingleton</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>LazyLoadedSingleton</span><span class=o>.</span><span class=na>getInstance</span><span class=o>().</span><span class=na>hello</span><span class=o>());</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>
</span></span><span class=line><span class=ln>14</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>LazyLoadedSingleton</span> <span class=nf>getInstance</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>instance</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>            <span class=n>instance</span> <span class=o>=</span> <span class=k>new</span> <span class=n>LazyLoadedSingleton</span><span class=o>();</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>        <span class=k>return</span> <span class=n>instance</span><span class=o>;</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>
</span></span><span class=line><span class=ln>21</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>hello</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>        <span class=k>return</span> <span class=o>(</span><span class=s>&#34;Hello from LazyLoadedSingleton!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>24</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>However this is not thread safe as in multithread environment 2 threads can get 2 different instances of the object. So lets make this thread safe. Notice we introduced synchronized keyword on the getInstance method.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.singleton</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>ThreadSafeSingleton</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=n>ThreadSafeSingleton</span> <span class=n>instance</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=kd>private</span> <span class=nf>ThreadSafeSingleton</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>ThreadSafeSingleton</span><span class=o>.</span><span class=na>getInstance</span><span class=o>().</span><span class=na>hello</span><span class=o>());</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>
</span></span><span class=line><span class=ln>14</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>synchronized</span> <span class=n>ThreadSafeSingleton</span> <span class=nf>getInstance</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>instance</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>            <span class=n>instance</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ThreadSafeSingleton</span><span class=o>();</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>        <span class=k>return</span> <span class=n>instance</span><span class=o>;</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>
</span></span><span class=line><span class=ln>21</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>hello</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>        <span class=k>return</span> <span class=o>(</span><span class=s>&#34;Hello from ThreadSafeSingleton!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>24</span><span class=cl><span class=o>}</span></span></span></code></pre></div><p>The above program is thread safe but reduces performance as each thread waits to enter the synchronized block. We now fix that by introducing double check locking. Notice that we removed the synchronized keyword on the getInstance method and moved it inside the method. We now perform 2 if checks on the instance.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.singleton</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>ThreadSafeSingletonDoubleCheckLock</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=n>ThreadSafeSingletonDoubleCheckLock</span> <span class=n>instance</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=kd>private</span> <span class=nf>ThreadSafeSingletonDoubleCheckLock</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>ThreadSafeSingletonDoubleCheckLock</span><span class=o>.</span><span class=na>getInstance</span><span class=o>().</span><span class=na>hello</span><span class=o>());</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>
</span></span><span class=line><span class=ln>14</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>ThreadSafeSingletonDoubleCheckLock</span> <span class=nf>getInstance</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>instance</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>            <span class=kd>synchronized</span> <span class=o>(</span><span class=n>ThreadSafeSingletonDoubleCheckLock</span><span class=o>.</span><span class=na>class</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>instance</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>                    <span class=n>instance</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ThreadSafeSingletonDoubleCheckLock</span><span class=o>();</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>
</span></span><span class=line><span class=ln>22</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>        <span class=k>return</span> <span class=n>instance</span><span class=o>;</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>
</span></span><span class=line><span class=ln>26</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>hello</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>        <span class=k>return</span> <span class=o>(</span><span class=s>&#34;Hello from ThreadSafeSingleton!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>29</span><span class=cl><span class=o>}</span></span></span></code></pre></div><p>Using reflection all previous singleton implementation can be broken</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.singleton</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>java.lang.reflect.Constructor</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=kn>import</span> <span class=nn>java.lang.reflect.InvocationTargetException</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>BreakSingletonByReflection</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>        <span class=k>new</span> <span class=n>BreakSingletonByReflection</span><span class=o>().</span><span class=na>testSingleton</span><span class=o>();</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>testSingleton</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>
</span></span><span class=line><span class=ln>14</span><span class=cl>        <span class=n>ThreadSafeSingletonDoubleCheckLock</span> <span class=n>instanceOne</span> <span class=o>=</span> <span class=n>ThreadSafeSingletonDoubleCheckLock</span><span class=o>.</span><span class=na>getInstance</span><span class=o>();</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>        <span class=n>ThreadSafeSingletonDoubleCheckLock</span> <span class=n>instanceTwo</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>        <span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>            <span class=n>Constructor</span><span class=o>[]</span> <span class=n>constructors</span> <span class=o>=</span> <span class=n>ThreadSafeSingletonDoubleCheckLock</span><span class=o>.</span><span class=na>class</span><span class=o>.</span><span class=na>getDeclaredConstructors</span><span class=o>();</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=n>Constructor</span> <span class=n>constructor</span> <span class=o>:</span> <span class=n>constructors</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>                <span class=n>constructor</span><span class=o>.</span><span class=na>setAccessible</span><span class=o>(</span><span class=kc>true</span><span class=o>);</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>                <span class=n>instanceTwo</span> <span class=o>=</span> <span class=o>(</span><span class=n>ThreadSafeSingletonDoubleCheckLock</span><span class=o>)</span> <span class=n>constructor</span><span class=o>.</span><span class=na>newInstance</span><span class=o>();</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>                <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>        <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>InstantiationException</span> <span class=o>|</span> <span class=n>IllegalAccessException</span> <span class=o>|</span> <span class=n>IllegalArgumentException</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>                <span class=o>|</span> <span class=n>InvocationTargetException</span> <span class=n>ex</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>            <span class=n>ex</span><span class=o>.</span><span class=na>printStackTrace</span><span class=o>();</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>instanceOne</span><span class=o>.</span><span class=na>hashCode</span><span class=o>()</span> <span class=o>!=</span> <span class=n>instanceTwo</span><span class=o>.</span><span class=na>hashCode</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Singleton broken!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>31</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>To safeguard against reflection we will throw RuntimeException in the constructor. We will introduce the volatile keyword to make it even more thread safe.</p><p>How volatile works in java?
The volatile keyword in Java is used as an indicator to Java compiler and Thread that do not cache value of this variable and always read it from main memory. Java volatile keyword also guarantees visibility and ordering, write to any volatile variable happens before any read into the volatile variable. It also prevents compiler or JVM from the reordering of code.</p><p>If we do not make the instance variable volatile than the Thread which is creating instance of Singleton is not able to communicate to the other thread, that the instance has been created until it comes out of the Singleton block, so if Thread A is creating Singleton instance and just after creation lost the CPU, all other thread will not be able to see value of instance as not null and they will believe its still null. By adding volatile java will not read the variable into thread context local memory and instead read it from the main memory each time.</p><p><figure><picture><img loading=lazy decoding=async alt class="image_figure image_internal image_processed" width=426 height=310 src=/post/design-patterns/volatile-memory-model.png></picture></figure></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.singleton</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>SingletonDefendReflection</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>volatile</span> <span class=n>SingletonDefendReflection</span> <span class=n>instance</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=kd>private</span> <span class=nf>SingletonDefendReflection</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>instance</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=n>RuntimeException</span><span class=o>(</span><span class=s>&#34;Use get instance to create object!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>SingletonDefendReflection</span><span class=o>.</span><span class=na>getInstance</span><span class=o>().</span><span class=na>hello</span><span class=o>());</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>SingletonDefendReflection</span> <span class=nf>getInstance</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>instance</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>            <span class=kd>synchronized</span> <span class=o>(</span><span class=n>SingletonDefendReflection</span><span class=o>.</span><span class=na>class</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>instance</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>                    <span class=n>instance</span> <span class=o>=</span> <span class=k>new</span> <span class=n>SingletonDefendReflection</span><span class=o>();</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>        <span class=k>return</span> <span class=n>instance</span><span class=o>;</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>
</span></span><span class=line><span class=ln>28</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>hello</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>        <span class=k>return</span> <span class=o>(</span><span class=s>&#34;Hello from ThreadSafeSingleton!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>31</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>To defend against reflection you can also use Enum based singleton, The disadvantage is you cant do lazy loading, you cant extend the singleton.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.singleton</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kd>public</span> <span class=kd>enum</span> <span class=n>EnumSingleton</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=n>INSTANCE</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>EnumSingleton</span><span class=o>.</span><span class=na>INSTANCE</span><span class=o>.</span><span class=na>hello</span><span class=o>());</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>hello</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>        <span class=k>return</span> <span class=o>(</span><span class=s>&#34;Hello from EnumSingleTon!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>
</span></span><span class=line><span class=ln>15</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>There is another approach of writing a singleton called Bill Pugh Singleton implementation which uses static inner helper class instead of using synchronized keyword.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.singleton</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>BillPughSingleton</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=kd>private</span> <span class=nf>BillPughSingleton</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>        <span class=n>BillPughSingleton</span><span class=o>.</span><span class=na>getInstance</span><span class=o>().</span><span class=na>hello</span><span class=o>();</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>BillPughSingleton</span> <span class=nf>getInstance</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>        <span class=k>return</span> <span class=n>SingletonHelper</span><span class=o>.</span><span class=na>INSTANCE</span><span class=o>;</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>hello</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>        <span class=k>return</span> <span class=s>&#34;Hello from BillPughSingleton&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>
</span></span><span class=line><span class=ln>21</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>class</span> <span class=nc>SingletonHelper</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>        <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>BillPughSingleton</span> <span class=n>INSTANCE</span> <span class=o>=</span> <span class=k>new</span> <span class=n>BillPughSingleton</span><span class=o>();</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>24</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>In a distributed systems a singleton needs to be serialized and restored from store later and care must be taken to ensure that new instance is not created and the same instance that was serialized is restored. Notice the method readResolve if this method is removed then the singleton design breaks during de-serialization.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.singleton</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>java.io.FileInputStream</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=kn>import</span> <span class=nn>java.io.FileOutputStream</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=kn>import</span> <span class=nn>java.io.ObjectInput</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=kn>import</span> <span class=nn>java.io.ObjectInputStream</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=kn>import</span> <span class=nn>java.io.ObjectOutput</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=kn>import</span> <span class=nn>java.io.ObjectOutputStream</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=kn>import</span> <span class=nn>java.io.Serializable</span><span class=o>;</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>SerializedSingleton</span> <span class=kd>implements</span> <span class=n>Serializable</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>long</span> <span class=n>serialVersionUID</span> <span class=o>=</span> <span class=o>-</span><span class=n>1L</span><span class=o>;</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>
</span></span><span class=line><span class=ln>15</span><span class=cl>    <span class=kd>private</span> <span class=nf>SerializedSingleton</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>
</span></span><span class=line><span class=ln>18</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>
</span></span><span class=line><span class=ln>20</span><span class=cl>        <span class=n>SerializedSingleton</span> <span class=n>instanceOne</span> <span class=o>=</span> <span class=n>SerializedSingleton</span><span class=o>.</span><span class=na>getInstance</span><span class=o>();</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>        <span class=n>ObjectOutput</span> <span class=n>out</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ObjectOutputStream</span><span class=o>(</span><span class=k>new</span> <span class=n>FileOutputStream</span><span class=o>(</span><span class=s>&#34;filename.ser&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>        <span class=n>out</span><span class=o>.</span><span class=na>writeObject</span><span class=o>(</span><span class=n>instanceOne</span><span class=o>);</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>        <span class=n>out</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>
</span></span><span class=line><span class=ln>25</span><span class=cl>        <span class=n>ObjectInput</span> <span class=n>in</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ObjectInputStream</span><span class=o>(</span><span class=k>new</span> <span class=n>FileInputStream</span><span class=o>(</span><span class=s>&#34;filename.ser&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>        <span class=n>SerializedSingleton</span> <span class=n>instanceTwo</span> <span class=o>=</span> <span class=o>(</span><span class=n>SerializedSingleton</span><span class=o>)</span> <span class=n>in</span><span class=o>.</span><span class=na>readObject</span><span class=o>();</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>        <span class=n>in</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>instanceOne</span><span class=o>.</span><span class=na>hashCode</span><span class=o>()</span> <span class=o>!=</span> <span class=n>instanceTwo</span><span class=o>.</span><span class=na>hashCode</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Singleton broken!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>instanceOne</span><span class=o>.</span><span class=na>getInstance</span><span class=o>().</span><span class=na>hello</span><span class=o>());</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>
</span></span><span class=line><span class=ln>34</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>
</span></span><span class=line><span class=ln>36</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>SerializedSingleton</span> <span class=nf>getInstance</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>        <span class=k>return</span> <span class=n>SingletonHelper</span><span class=o>.</span><span class=na>instance</span><span class=o>;</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>
</span></span><span class=line><span class=ln>40</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>hello</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>41</span><span class=cl>        <span class=k>return</span> <span class=o>(</span><span class=s>&#34;Hello from singleton!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>42</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>43</span><span class=cl>
</span></span><span class=line><span class=ln>44</span><span class=cl>    <span class=kd>protected</span> <span class=n>Object</span> <span class=nf>readResolve</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>45</span><span class=cl>        <span class=k>return</span> <span class=n>getInstance</span><span class=o>();</span>
</span></span><span class=line><span class=ln>46</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>47</span><span class=cl>
</span></span><span class=line><span class=ln>48</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>class</span> <span class=nc>SingletonHelper</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>49</span><span class=cl>        <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>SerializedSingleton</span> <span class=n>instance</span> <span class=o>=</span> <span class=k>new</span> <span class=n>SerializedSingleton</span><span class=o>();</span>
</span></span><span class=line><span class=ln>50</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>51</span><span class=cl>
</span></span><span class=line><span class=ln>52</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>A singleton example within java sdk is the Runtime class for garbage collection.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.singleton</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>RuntimeSingleton</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>        <span class=n>Runtime</span> <span class=n>singleton1</span> <span class=o>=</span> <span class=n>Runtime</span><span class=o>.</span><span class=na>getRuntime</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>        <span class=n>singleton1</span><span class=o>.</span><span class=na>gc</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>        <span class=n>Runtime</span> <span class=n>singleton2</span> <span class=o>=</span> <span class=n>Runtime</span><span class=o>.</span><span class=na>getRuntime</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>singleton1</span> <span class=o>==</span> <span class=n>singleton2</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Singleton!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Not Singleton!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>14</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>Why not use a static class instead of writing a singleton class?
Because static class doesnt guarantee thread safety.</p><p>Can i have parameters in a singleton?
A singleton constructor cant take parameters that violates the rule of singleton. If there are parameters then it classifies as a factory pattern.</p><p>If singleton is unique instance per JVM instance how does it work in a tomcat server which can have 2 instances of same web application deployed on it. Since the applications still run on single JVM will they share the singleton?
In this case both web applications will get their own instance of singleton because of class loader visibility.Tomcat uses individual class loaders for webapps. However if both application request a JRE or Tomcat singleton eg: Runtime then both get the same singleton.</p><h3 id=2-factory-pattern>2. Factory Pattern</h3><p>Factory design pattern is used when we have a super class with multiple sub-classes and based on input, we need to return one of the sub-class. The main method doesnt know the details of instantiating a object its deferred to the factory subclass. Factory calls the new operator.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.factory</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kd>enum</span> <span class=n>AnimalType</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=n>DOG</span><span class=o>,</span> <span class=n>DUCK</span><span class=o>,</span> <span class=n>CAT</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=kd>interface</span> <span class=nc>Animal</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>sound</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>        <span class=n>Animal</span> <span class=n>animal</span> <span class=o>=</span> <span class=n>Factory</span><span class=o>.</span><span class=na>getAnimal</span><span class=o>(</span><span class=n>AnimalType</span><span class=o>.</span><span class=na>CAT</span><span class=o>);</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>animal</span><span class=o>.</span><span class=na>sound</span><span class=o>());</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>17</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>
</span></span><span class=line><span class=ln>19</span><span class=cl><span class=kd>class</span> <span class=nc>Duck</span> <span class=kd>implements</span> <span class=n>Animal</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>
</span></span><span class=line><span class=ln>21</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>sound</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>        <span class=k>return</span> <span class=s>&#34;Quak!&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>25</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>
</span></span><span class=line><span class=ln>27</span><span class=cl><span class=kd>class</span> <span class=nc>Dog</span> <span class=kd>implements</span> <span class=n>Animal</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>
</span></span><span class=line><span class=ln>29</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>sound</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>        <span class=k>return</span> <span class=s>&#34;Bark!&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>33</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>34</span><span class=cl>
</span></span><span class=line><span class=ln>35</span><span class=cl><span class=kd>class</span> <span class=nc>Cat</span> <span class=kd>implements</span> <span class=n>Animal</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>
</span></span><span class=line><span class=ln>37</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>sound</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>        <span class=k>return</span> <span class=s>&#34;Meow!&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln>40</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>41</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>42</span><span class=cl>
</span></span><span class=line><span class=ln>43</span><span class=cl><span class=kd>class</span> <span class=nc>Factory</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>44</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>Animal</span> <span class=nf>getAnimal</span><span class=o>(</span><span class=n>AnimalType</span> <span class=n>type</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>45</span><span class=cl>        <span class=k>switch</span> <span class=o>(</span><span class=n>type</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>46</span><span class=cl>            <span class=k>case</span> <span class=n>DOG</span><span class=o>:</span>
</span></span><span class=line><span class=ln>47</span><span class=cl>                <span class=k>return</span> <span class=k>new</span> <span class=n>Dog</span><span class=o>();</span>
</span></span><span class=line><span class=ln>48</span><span class=cl>            <span class=k>case</span> <span class=n>CAT</span><span class=o>:</span>
</span></span><span class=line><span class=ln>49</span><span class=cl>                <span class=k>return</span> <span class=k>new</span> <span class=n>Cat</span><span class=o>();</span>
</span></span><span class=line><span class=ln>50</span><span class=cl>            <span class=k>case</span> <span class=n>DUCK</span><span class=o>:</span>
</span></span><span class=line><span class=ln>51</span><span class=cl>                <span class=k>return</span> <span class=k>new</span> <span class=n>Duck</span><span class=o>();</span>
</span></span><span class=line><span class=ln>52</span><span class=cl>            <span class=k>default</span><span class=o>:</span>
</span></span><span class=line><span class=ln>53</span><span class=cl>                <span class=k>return</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=ln>54</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>55</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>56</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h3 id=3-abstract-factory-pattern>3. Abstract Factory Pattern</h3><p>Abstract factory pattern is similar to Factory pattern and it’s factory of factories. In factory pattern we used switch statement to decide which object to return in abstract factory we remove the if-else/switch block and have a factory class for each sub-class.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.abstractfactory</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kd>interface</span> <span class=nc>Animal</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>sound</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=kd>interface</span> <span class=nc>BaseFactory</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=kd>public</span> <span class=n>Animal</span> <span class=nf>createAnimal</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>        <span class=n>Animal</span> <span class=n>animal</span> <span class=o>=</span> <span class=n>AbstractFactory</span><span class=o>.</span><span class=na>getAnimal</span><span class=o>(</span><span class=k>new</span> <span class=n>DogFactory</span><span class=o>());</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>animal</span><span class=o>.</span><span class=na>sound</span><span class=o>());</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>17</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>
</span></span><span class=line><span class=ln>19</span><span class=cl><span class=kd>class</span> <span class=nc>Duck</span> <span class=kd>implements</span> <span class=n>Animal</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>sound</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>        <span class=k>return</span> <span class=s>&#34;Quak!&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>24</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>
</span></span><span class=line><span class=ln>26</span><span class=cl><span class=kd>class</span> <span class=nc>Dog</span> <span class=kd>implements</span> <span class=n>Animal</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>sound</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>        <span class=k>return</span> <span class=s>&#34;Bark!&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>31</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>
</span></span><span class=line><span class=ln>33</span><span class=cl><span class=kd>class</span> <span class=nc>Cat</span> <span class=kd>implements</span> <span class=n>Animal</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>34</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>sound</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>        <span class=k>return</span> <span class=s>&#34;Meow!&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>38</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>
</span></span><span class=line><span class=ln>40</span><span class=cl><span class=kd>class</span> <span class=nc>AbstractFactory</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>41</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>Animal</span> <span class=nf>getAnimal</span><span class=o>(</span><span class=n>BaseFactory</span> <span class=n>bf</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>42</span><span class=cl>        <span class=k>return</span> <span class=n>bf</span><span class=o>.</span><span class=na>createAnimal</span><span class=o>();</span>
</span></span><span class=line><span class=ln>43</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>44</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>45</span><span class=cl>
</span></span><span class=line><span class=ln>46</span><span class=cl><span class=kd>class</span> <span class=nc>DuckFactory</span> <span class=kd>implements</span> <span class=n>BaseFactory</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>47</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>48</span><span class=cl>    <span class=kd>public</span> <span class=n>Animal</span> <span class=nf>createAnimal</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>49</span><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>Duck</span><span class=o>();</span>
</span></span><span class=line><span class=ln>50</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>51</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>52</span><span class=cl>
</span></span><span class=line><span class=ln>53</span><span class=cl><span class=kd>class</span> <span class=nc>DogFactory</span> <span class=kd>implements</span> <span class=n>BaseFactory</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>54</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>55</span><span class=cl>    <span class=kd>public</span> <span class=n>Animal</span> <span class=nf>createAnimal</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>56</span><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>Dog</span><span class=o>();</span>
</span></span><span class=line><span class=ln>57</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>58</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>59</span><span class=cl>
</span></span><span class=line><span class=ln>60</span><span class=cl><span class=kd>class</span> <span class=nc>CatFactory</span> <span class=kd>implements</span> <span class=n>BaseFactory</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>61</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>62</span><span class=cl>    <span class=kd>public</span> <span class=n>Animal</span> <span class=nf>createAnimal</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>63</span><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>Cat</span><span class=o>();</span>
</span></span><span class=line><span class=ln>64</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>65</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h3 id=4-builder-pattern>4. Builder Pattern</h3><p>Builder pattern is used to build a complex object with lot of attributes. It becomes difficult to pass the correct type in correct order to a constructor when there are many attributes. If some of the attributes are optional then there is overhead of having to pass null each time to the constructor or having to write multiple constructors(telescoping). Notice that in the example below builder pattern returns <b>immutable object</b> hence no setter methods exist. Notice the <b>static inner class</b> you can write an external class as well if you choose not to modify an existing class. Notice the private constructor of the Dog class as the only way to create an instance is via Builder. The name of dog and breed are the only mandatory fields this defines a contract that a dog object atleast needs these 2 attributes.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.builder</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.Getter</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.ToString</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>        <span class=n>Dog</span> <span class=n>dog1</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Dog</span><span class=o>.</span><span class=na>DogBuilder</span><span class=o>(</span><span class=s>&#34;rocky&#34;</span><span class=o>,</span> <span class=s>&#34;German Sheperd&#34;</span><span class=o>).</span><span class=na>setColor</span><span class=o>(</span><span class=s>&#34;Grey&#34;</span><span class=o>).</span><span class=na>setAge</span><span class=o>(</span><span class=n>6</span><span class=o>).</span><span class=na>setWeight</span><span class=o>(</span><span class=n>40</span><span class=o>.</span><span class=na>5</span><span class=o>).</span><span class=na>build</span><span class=o>();</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>dog1</span><span class=o>);</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>        <span class=n>Dog</span> <span class=n>dog2</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Dog</span><span class=o>.</span><span class=na>DogBuilder</span><span class=o>(</span><span class=s>&#34;rocky&#34;</span><span class=o>,</span> <span class=s>&#34;German Sheperd&#34;</span><span class=o>).</span><span class=na>build</span><span class=o>();</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>dog2</span><span class=o>);</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>
</span></span><span class=line><span class=ln>15</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>
</span></span><span class=line><span class=ln>17</span><span class=cl><span class=nd>@Getter</span>
</span></span><span class=line><span class=ln>18</span><span class=cl><span class=nd>@ToString</span>
</span></span><span class=line><span class=ln>19</span><span class=cl><span class=kd>class</span> <span class=nc>Dog</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>
</span></span><span class=line><span class=ln>21</span><span class=cl>    <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>    <span class=n>String</span> <span class=n>breed</span><span class=o>;</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>    <span class=n>String</span> <span class=n>color</span><span class=o>;</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>    <span class=kt>int</span> <span class=n>age</span><span class=o>;</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>    <span class=kt>double</span> <span class=n>weight</span><span class=o>;</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>
</span></span><span class=line><span class=ln>27</span><span class=cl>    <span class=kd>private</span> <span class=nf>Dog</span><span class=o>(</span><span class=n>DogBuilder</span> <span class=n>builder</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>name</span> <span class=o>=</span> <span class=n>builder</span><span class=o>.</span><span class=na>name</span><span class=o>;</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>breed</span> <span class=o>=</span> <span class=n>builder</span><span class=o>.</span><span class=na>breed</span><span class=o>;</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>color</span> <span class=o>=</span> <span class=n>builder</span><span class=o>.</span><span class=na>color</span><span class=o>;</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>age</span> <span class=o>=</span> <span class=n>builder</span><span class=o>.</span><span class=na>age</span><span class=o>;</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>weight</span> <span class=o>=</span> <span class=n>builder</span><span class=o>.</span><span class=na>weight</span><span class=o>;</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>34</span><span class=cl>
</span></span><span class=line><span class=ln>35</span><span class=cl>    <span class=nd>@Getter</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>class</span> <span class=nc>DogBuilder</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>
</span></span><span class=line><span class=ln>38</span><span class=cl>        <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>        <span class=n>String</span> <span class=n>breed</span><span class=o>;</span>
</span></span><span class=line><span class=ln>40</span><span class=cl>        <span class=n>String</span> <span class=n>color</span><span class=o>;</span>
</span></span><span class=line><span class=ln>41</span><span class=cl>        <span class=kt>int</span> <span class=n>age</span><span class=o>;</span>
</span></span><span class=line><span class=ln>42</span><span class=cl>        <span class=kt>double</span> <span class=n>weight</span><span class=o>;</span>
</span></span><span class=line><span class=ln>43</span><span class=cl>
</span></span><span class=line><span class=ln>44</span><span class=cl>        <span class=kd>public</span> <span class=nf>DogBuilder</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>,</span> <span class=n>String</span> <span class=n>breed</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>45</span><span class=cl>            <span class=k>this</span><span class=o>.</span><span class=na>name</span> <span class=o>=</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=ln>46</span><span class=cl>            <span class=k>this</span><span class=o>.</span><span class=na>breed</span> <span class=o>=</span> <span class=n>breed</span><span class=o>;</span>
</span></span><span class=line><span class=ln>47</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>48</span><span class=cl>
</span></span><span class=line><span class=ln>49</span><span class=cl>        <span class=kd>public</span> <span class=n>Dog</span> <span class=nf>build</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>50</span><span class=cl>            <span class=k>return</span> <span class=k>new</span> <span class=n>Dog</span><span class=o>(</span><span class=k>this</span><span class=o>);</span>
</span></span><span class=line><span class=ln>51</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>52</span><span class=cl>
</span></span><span class=line><span class=ln>53</span><span class=cl>        <span class=kd>public</span> <span class=n>DogBuilder</span> <span class=nf>setColor</span><span class=o>(</span><span class=n>String</span> <span class=n>color</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>54</span><span class=cl>            <span class=k>this</span><span class=o>.</span><span class=na>color</span> <span class=o>=</span> <span class=n>color</span><span class=o>;</span>
</span></span><span class=line><span class=ln>55</span><span class=cl>            <span class=k>return</span> <span class=k>this</span><span class=o>;</span>
</span></span><span class=line><span class=ln>56</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>57</span><span class=cl>
</span></span><span class=line><span class=ln>58</span><span class=cl>        <span class=kd>public</span> <span class=n>DogBuilder</span> <span class=nf>setAge</span><span class=o>(</span><span class=kt>int</span> <span class=n>age</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>59</span><span class=cl>            <span class=k>this</span><span class=o>.</span><span class=na>age</span> <span class=o>=</span> <span class=n>age</span><span class=o>;</span>
</span></span><span class=line><span class=ln>60</span><span class=cl>            <span class=k>return</span> <span class=k>this</span><span class=o>;</span>
</span></span><span class=line><span class=ln>61</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>62</span><span class=cl>
</span></span><span class=line><span class=ln>63</span><span class=cl>        <span class=kd>public</span> <span class=n>DogBuilder</span> <span class=nf>setWeight</span><span class=o>(</span><span class=kt>double</span> <span class=n>weight</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>64</span><span class=cl>            <span class=k>this</span><span class=o>.</span><span class=na>weight</span> <span class=o>=</span> <span class=n>weight</span><span class=o>;</span>
</span></span><span class=line><span class=ln>65</span><span class=cl>            <span class=k>return</span> <span class=k>this</span><span class=o>;</span>
</span></span><span class=line><span class=ln>66</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>67</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>68</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>Dog<span class=o>(</span><span class=nv>name</span><span class=o>=</span>rocky, <span class=nv>breed</span><span class=o>=</span>German Sheperd, <span class=nv>color</span><span class=o>=</span>Grey, <span class=nv>age</span><span class=o>=</span>6, <span class=nv>weight</span><span class=o>=</span>40.5<span class=o>)</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>Dog<span class=o>(</span><span class=nv>name</span><span class=o>=</span>rocky, <span class=nv>breed</span><span class=o>=</span>German Sheperd, <span class=nv>color</span><span class=o>=</span>null, <span class=nv>age</span><span class=o>=</span>0, <span class=nv>weight</span><span class=o>=</span>0.0<span class=o>)</span>
</span></span></code></pre></div><p>Using lombok @Builder annotation you can reduce the code further</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.builder.other</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.Builder</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.Getter</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.ToString</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>        <span class=n>Dog</span> <span class=n>dog1</span> <span class=o>=</span> <span class=n>Dog</span><span class=o>.</span><span class=na>builder</span><span class=o>().</span><span class=na>name</span><span class=o>(</span><span class=s>&#34;Rocky&#34;</span><span class=o>).</span><span class=na>breed</span><span class=o>(</span><span class=s>&#34;German Sheperd&#34;</span><span class=o>).</span><span class=na>build</span><span class=o>();</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>dog1</span><span class=o>);</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>
</span></span><span class=line><span class=ln>14</span><span class=cl><span class=nd>@Builder</span>
</span></span><span class=line><span class=ln>15</span><span class=cl><span class=nd>@Getter</span>
</span></span><span class=line><span class=ln>16</span><span class=cl><span class=nd>@ToString</span>
</span></span><span class=line><span class=ln>17</span><span class=cl><span class=kd>class</span> <span class=nc>Dog</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>
</span></span><span class=line><span class=ln>19</span><span class=cl>    <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>    <span class=n>String</span> <span class=n>breed</span><span class=o>;</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>    <span class=n>String</span> <span class=n>color</span><span class=o>;</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>    <span class=kt>int</span> <span class=n>age</span><span class=o>;</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>    <span class=nd>@Builder.Default</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>    <span class=kt>double</span> <span class=n>weight</span> <span class=o>=</span> <span class=n>30</span><span class=o>.</span><span class=na>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln>25</span><span class=cl><span class=o>}</span></span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>Dog<span class=o>(</span><span class=nv>name</span><span class=o>=</span>Rocky, <span class=nv>breed</span><span class=o>=</span>German Sheperd, <span class=nv>color</span><span class=o>=</span>null, <span class=nv>age</span><span class=o>=</span>0, <span class=nv>weight</span><span class=o>=</span>30.0<span class=o>)</span>
</span></span></code></pre></div><p>An example in the java SDK is the StringBuilder class.</p><h3 id=5-prototype-pattern>5. Prototype Pattern</h3><p>Prototype pattern is used when the object creation is expensive. Instead of creating a new object you can copy the original object using clone and then modify it according to your needs. Prototype design pattern mandates that the object which you are copying should provide the copying feature, it should not be done by any other class. Decision to use shallow or deep copy of the object attributes is a design decision a shallow copy just copies immediate property and deep copy copies all object references as well. Notice we dont use new to create prototype objects after the first instance is created. Prototype avoid subclassing.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.prototype</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.ArrayList</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.List</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.AllArgsConstructor</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.Data</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>CloneNotSupportedException</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>        <span class=n>Employees</span> <span class=n>emps</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Employees</span><span class=o>(</span><span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;());</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>        <span class=n>emps</span><span class=o>.</span><span class=na>seedData</span><span class=o>();</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>        <span class=n>Employees</span> <span class=n>dataSet1</span> <span class=o>=</span> <span class=o>(</span><span class=n>Employees</span><span class=o>)</span> <span class=n>emps</span><span class=o>.</span><span class=na>clone</span><span class=o>();</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>        <span class=n>Employees</span> <span class=n>dataSet2</span> <span class=o>=</span> <span class=o>(</span><span class=n>Employees</span><span class=o>)</span> <span class=n>emps</span><span class=o>.</span><span class=na>clone</span><span class=o>();</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>
</span></span><span class=line><span class=ln>17</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;dataSet1 size: &#34;</span> <span class=o>+</span> <span class=n>dataSet1</span><span class=o>.</span><span class=na>getEmpList</span><span class=o>().</span><span class=na>size</span><span class=o>());</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;dataSet2 size: &#34;</span> <span class=o>+</span> <span class=n>dataSet2</span><span class=o>.</span><span class=na>getEmpList</span><span class=o>().</span><span class=na>size</span><span class=o>());</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>
</span></span><span class=line><span class=ln>20</span><span class=cl>        <span class=n>dataSet2</span><span class=o>.</span><span class=na>getEmpList</span><span class=o>().</span><span class=na>add</span><span class=o>(</span><span class=s>&#34;jhon&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;dataSet1 size: &#34;</span> <span class=o>+</span> <span class=n>dataSet1</span><span class=o>.</span><span class=na>getEmpList</span><span class=o>().</span><span class=na>size</span><span class=o>());</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;dataSet2 size: &#34;</span> <span class=o>+</span> <span class=n>dataSet2</span><span class=o>.</span><span class=na>getEmpList</span><span class=o>().</span><span class=na>size</span><span class=o>());</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>
</span></span><span class=line><span class=ln>25</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>
</span></span><span class=line><span class=ln>27</span><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=ln>28</span><span class=cl><span class=nd>@Data</span>
</span></span><span class=line><span class=ln>29</span><span class=cl><span class=kd>class</span> <span class=nc>Employees</span> <span class=kd>implements</span> <span class=n>Cloneable</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>
</span></span><span class=line><span class=ln>31</span><span class=cl>    <span class=kd>private</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>empList</span><span class=o>;</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>
</span></span><span class=line><span class=ln>33</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>seedData</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>34</span><span class=cl>        <span class=c1>//Invoke a remote call and fetch data and load it to list. The fetch is costly op.
</span></span></span><span class=line><span class=ln>35</span><span class=cl><span class=c1></span>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>100</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>            <span class=n>empList</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=s>&#34;employee_&#34;</span> <span class=o>+</span> <span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>
</span></span><span class=line><span class=ln>40</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>41</span><span class=cl>    <span class=kd>public</span> <span class=n>Object</span> <span class=nf>clone</span><span class=o>()</span> <span class=kd>throws</span> <span class=n>CloneNotSupportedException</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>42</span><span class=cl>        <span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>temp</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=ln>43</span><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=n>String</span> <span class=n>s</span> <span class=o>:</span> <span class=k>this</span><span class=o>.</span><span class=na>empList</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>44</span><span class=cl>            <span class=n>temp</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>s</span><span class=o>);</span>
</span></span><span class=line><span class=ln>45</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>46</span><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>Employees</span><span class=o>(</span><span class=n>temp</span><span class=o>);</span>
</span></span><span class=line><span class=ln>47</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>48</span><span class=cl><span class=o>}</span></span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>dataSet1 size: <span class=m>100</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>dataSet2 size: <span class=m>100</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>dataSet1 size: <span class=m>100</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>dataSet2 size: <span class=m>101</span>
</span></span></code></pre></div><p>You can also create a registry to stored newly created objects when there are different types of objects and lookup against the registry when you want to clone objects.</p><h2 id=structural-design-patterns>Structural Design Patterns</h2><p>Deal with class and object composition. Provide different ways to create a class structure, using inheritance and composition to create a large object from small objects</p><h3 id=1-adapter-pattern>1. Adapter Pattern</h3><p>Adapter pattern is used when two unrelated interfaces need to work together. There is a AlienCraft which has different type of fire & scan api that takes additional parameter compared to the human readable ship interface. However by writing the adapter we map the appropriate functions for fire and scan.</p><p><figure><picture><img loading=lazy decoding=async alt class="image_figure image_internal image_processed" width=1174 height=347 src=/post/design-patterns/adapter-pattern-visual.png></picture></figure></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.adapter</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.AllArgsConstructor</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=kd>interface</span> <span class=nc>Ship</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>scan</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>fire</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>        <span class=n>SpaceShipAdapter</span> <span class=n>shipAdapter</span> <span class=o>=</span> <span class=k>new</span> <span class=n>SpaceShipAdapter</span><span class=o>(</span><span class=k>new</span> <span class=n>AlienCraft</span><span class=o>());</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>        <span class=n>shipAdapter</span><span class=o>.</span><span class=na>scan</span><span class=o>();</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>        <span class=n>shipAdapter</span><span class=o>.</span><span class=na>fire</span><span class=o>();</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>18</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>
</span></span><span class=line><span class=ln>20</span><span class=cl><span class=kd>class</span> <span class=nc>AlienCraft</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>drakarys</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Firing weapon&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>
</span></span><span class=line><span class=ln>25</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>jorarghugon</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Scanning enemy&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>28</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>
</span></span><span class=line><span class=ln>30</span><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=ln>31</span><span class=cl><span class=kd>class</span> <span class=nc>SpaceShipAdapter</span> <span class=kd>implements</span> <span class=n>Ship</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>    <span class=n>AlienCraft</span> <span class=n>ship</span><span class=o>;</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>
</span></span><span class=line><span class=ln>34</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>scan</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>        <span class=n>ship</span><span class=o>.</span><span class=na>jorarghugon</span><span class=o>();</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>
</span></span><span class=line><span class=ln>39</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>40</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>fire</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>41</span><span class=cl>        <span class=n>ship</span><span class=o>.</span><span class=na>drakarys</span><span class=o>();</span>
</span></span><span class=line><span class=ln>42</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>43</span><span class=cl>
</span></span><span class=line><span class=ln>44</span><span class=cl><span class=o>}</span></span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>Scanning enemy in sector NORTH
</span></span><span class=line><span class=ln>2</span><span class=cl>Firing weapon at sector NORTH
</span></span></code></pre></div><p>UML Diagram Adapter design pattern.</p><p><figure><picture><img loading=lazy decoding=async alt class="image_figure image_internal image_processed" width=475 height=336 src=/post/design-patterns/adapter.png></picture></figure></p><h3 id=2-composite-pattern>2. Composite Pattern</h3><p>Composite pattern is used when we have to represent a part-whole hierarchy.A group of objects should behave in a similar way,tree like structure. Here we have a playlist which can contain songs or other playlist and those playlist can have songs of their own.</p><p><figure><picture><img loading=lazy decoding=async alt class="image_figure image_internal image_processed" width=921 height=684 src=/post/design-patterns/composite-pattern-visual.png></picture></figure></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.composite</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.ArrayList</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.List</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.AllArgsConstructor</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.RequiredArgsConstructor</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=c1>//When the group of objects should behave as the single object
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=c1></span><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>        <span class=n>SongComponent</span> <span class=n>playlist1</span> <span class=o>=</span> <span class=k>new</span> <span class=n>PlayList</span><span class=o>(</span><span class=s>&#34;playlist_1&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>        <span class=n>SongComponent</span> <span class=n>playlist2</span> <span class=o>=</span> <span class=k>new</span> <span class=n>PlayList</span><span class=o>(</span><span class=s>&#34;playlist_2&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>        <span class=n>SongComponent</span> <span class=n>playlist3</span> <span class=o>=</span> <span class=k>new</span> <span class=n>PlayList</span><span class=o>(</span><span class=s>&#34;playlist_3&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>        <span class=n>SongComponent</span> <span class=n>myplaylist</span> <span class=o>=</span> <span class=k>new</span> <span class=n>PlayList</span><span class=o>(</span><span class=s>&#34;myplaylist&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>        <span class=n>myplaylist</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>playlist1</span><span class=o>);</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>        <span class=n>myplaylist</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>playlist2</span><span class=o>);</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>        <span class=n>playlist1</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Song</span><span class=o>(</span><span class=s>&#34;Song1&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>        <span class=n>playlist1</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Song</span><span class=o>(</span><span class=s>&#34;Song2&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>        <span class=n>playlist1</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>playlist3</span><span class=o>);</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>        <span class=n>playlist3</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Song</span><span class=o>(</span><span class=s>&#34;Song3&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>
</span></span><span class=line><span class=ln>24</span><span class=cl>        <span class=n>myplaylist</span><span class=o>.</span><span class=na>displaySongInfo</span><span class=o>();</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>26</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>
</span></span><span class=line><span class=ln>28</span><span class=cl><span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>SongComponent</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>
</span></span><span class=line><span class=ln>30</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>add</span><span class=o>(</span><span class=n>SongComponent</span> <span class=n>c</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>        <span class=k>throw</span> <span class=k>new</span> <span class=n>UnsupportedOperationException</span><span class=o>();</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>
</span></span><span class=line><span class=ln>34</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getSong</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>        <span class=k>throw</span> <span class=k>new</span> <span class=n>UnsupportedOperationException</span><span class=o>();</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>
</span></span><span class=line><span class=ln>38</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>displaySongInfo</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>        <span class=k>throw</span> <span class=k>new</span> <span class=n>UnsupportedOperationException</span><span class=o>();</span>
</span></span><span class=line><span class=ln>40</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>41</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>42</span><span class=cl>
</span></span><span class=line><span class=ln>43</span><span class=cl><span class=nd>@RequiredArgsConstructor</span>
</span></span><span class=line><span class=ln>44</span><span class=cl><span class=kd>class</span> <span class=nc>PlayList</span> <span class=kd>extends</span> <span class=n>SongComponent</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>45</span><span class=cl>
</span></span><span class=line><span class=ln>46</span><span class=cl>    <span class=kd>final</span> <span class=n>String</span> <span class=n>playListName</span><span class=o>;</span>
</span></span><span class=line><span class=ln>47</span><span class=cl>    <span class=n>List</span><span class=o>&lt;</span><span class=n>SongComponent</span><span class=o>&gt;</span> <span class=n>componentLst</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=ln>48</span><span class=cl>
</span></span><span class=line><span class=ln>49</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>50</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>add</span><span class=o>(</span><span class=n>SongComponent</span> <span class=n>c</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>51</span><span class=cl>        <span class=n>componentLst</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=ln>52</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>53</span><span class=cl>
</span></span><span class=line><span class=ln>54</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>55</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>displaySongInfo</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>56</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Playlist Name: &#34;</span> <span class=o>+</span> <span class=n>playListName</span><span class=o>);</span>
</span></span><span class=line><span class=ln>57</span><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=n>SongComponent</span> <span class=n>s</span> <span class=o>:</span> <span class=n>componentLst</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>58</span><span class=cl>            <span class=n>s</span><span class=o>.</span><span class=na>displaySongInfo</span><span class=o>();</span>
</span></span><span class=line><span class=ln>59</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>60</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>61</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>62</span><span class=cl>
</span></span><span class=line><span class=ln>63</span><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=ln>64</span><span class=cl><span class=kd>class</span> <span class=nc>Song</span> <span class=kd>extends</span> <span class=n>SongComponent</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>65</span><span class=cl>    <span class=n>String</span> <span class=n>songName</span><span class=o>;</span>
</span></span><span class=line><span class=ln>66</span><span class=cl>
</span></span><span class=line><span class=ln>67</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>68</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getSong</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>69</span><span class=cl>        <span class=k>return</span> <span class=n>songName</span><span class=o>;</span>
</span></span><span class=line><span class=ln>70</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>71</span><span class=cl>
</span></span><span class=line><span class=ln>72</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>73</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>displaySongInfo</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>74</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Song: &#34;</span> <span class=o>+</span> <span class=n>songName</span><span class=o>);</span>
</span></span><span class=line><span class=ln>75</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>76</span><span class=cl><span class=o>}</span></span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>Playlist Name: myplaylist
</span></span><span class=line><span class=ln>2</span><span class=cl>Playlist Name: playlist_1
</span></span><span class=line><span class=ln>3</span><span class=cl>Song: Song1
</span></span><span class=line><span class=ln>4</span><span class=cl>Song: Song2
</span></span><span class=line><span class=ln>5</span><span class=cl>Playlist Name: playlist_3
</span></span><span class=line><span class=ln>6</span><span class=cl>Song: Song3
</span></span><span class=line><span class=ln>7</span><span class=cl>Playlist Name: playlist_2
</span></span></code></pre></div><h3 id=3-proxy-pattern>3. Proxy Pattern</h3><p>Proxy pattern is used when we want to provide controlled access of a functionality. A real world example would be when a lawyer restricts the questions police would ask a mob boss. You can add only one proxy per class.</p><p><figure><picture><img loading=lazy decoding=async alt class="image_figure image_internal image_processed" width=730 height=250 src=/post/design-patterns/proxy-pattern-visual.png></picture></figure></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.proxy</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kd>interface</span> <span class=nc>Command</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>runCommand</span><span class=o>(</span><span class=n>String</span> <span class=n>cmd</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>        <span class=n>Proxy</span> <span class=n>proxy</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Proxy</span><span class=o>();</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>        <span class=n>proxy</span><span class=o>.</span><span class=na>runCommand</span><span class=o>(</span><span class=s>&#34;rm&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>        <span class=n>proxy</span><span class=o>.</span><span class=na>runCommand</span><span class=o>(</span><span class=s>&#34;dir&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>14</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>
</span></span><span class=line><span class=ln>16</span><span class=cl><span class=kd>class</span> <span class=nc>CommandImpl</span> <span class=kd>implements</span> <span class=n>Command</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>
</span></span><span class=line><span class=ln>18</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>runCommand</span><span class=o>(</span><span class=n>String</span> <span class=n>cmd</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Running : &#34;</span> <span class=o>+</span> <span class=n>cmd</span><span class=o>);</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>22</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>
</span></span><span class=line><span class=ln>24</span><span class=cl><span class=kd>class</span> <span class=nc>Proxy</span> <span class=kd>implements</span> <span class=n>Command</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>
</span></span><span class=line><span class=ln>26</span><span class=cl>    <span class=n>Command</span> <span class=n>cmdObj</span><span class=o>;</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>
</span></span><span class=line><span class=ln>28</span><span class=cl>    <span class=kd>public</span> <span class=nf>Proxy</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>cmdObj</span> <span class=o>=</span> <span class=k>new</span> <span class=n>CommandImpl</span><span class=o>();</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>
</span></span><span class=line><span class=ln>32</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>runCommand</span><span class=o>(</span><span class=n>String</span> <span class=n>cmd</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>34</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>cmd</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s>&#34;rm&#34;</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Cant run rm&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>            <span class=n>cmdObj</span><span class=o>.</span><span class=na>runCommand</span><span class=o>(</span><span class=n>cmd</span><span class=o>);</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>40</span><span class=cl>
</span></span><span class=line><span class=ln>41</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>Cant run rm
</span></span><span class=line><span class=ln>2</span><span class=cl>Running : dir
</span></span></code></pre></div><p>A much more generic way to doing this using default java class InvocationHandler is shown below.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.proxy.other</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>java.lang.reflect.InvocationHandler</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=kn>import</span> <span class=nn>java.lang.reflect.InvocationTargetException</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=kn>import</span> <span class=nn>java.lang.reflect.Method</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=kd>interface</span> <span class=nc>Command</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>runCommand</span><span class=o>(</span><span class=n>String</span> <span class=n>cmd</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>        <span class=n>Command</span> <span class=n>cmd</span> <span class=o>=</span> <span class=o>(</span><span class=n>Command</span><span class=o>)</span> <span class=n>CommandProxy</span><span class=o>.</span><span class=na>newInstance</span><span class=o>(</span><span class=k>new</span> <span class=n>CommandImpl</span><span class=o>());</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>        <span class=n>cmd</span><span class=o>.</span><span class=na>runCommand</span><span class=o>(</span><span class=s>&#34;ls&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>        <span class=n>cmd</span><span class=o>.</span><span class=na>runCommand</span><span class=o>(</span><span class=s>&#34;rm&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>
</span></span><span class=line><span class=ln>19</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>
</span></span><span class=line><span class=ln>21</span><span class=cl><span class=kd>class</span> <span class=nc>CommandImpl</span> <span class=kd>implements</span> <span class=n>Command</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>
</span></span><span class=line><span class=ln>23</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>runCommand</span><span class=o>(</span><span class=n>String</span> <span class=n>cmd</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Running : &#34;</span> <span class=o>+</span> <span class=n>cmd</span><span class=o>);</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>27</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>
</span></span><span class=line><span class=ln>29</span><span class=cl><span class=kd>class</span> <span class=nc>CommandProxy</span> <span class=kd>implements</span> <span class=n>InvocationHandler</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>    <span class=kd>private</span> <span class=n>Object</span> <span class=n>obj</span><span class=o>;</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>
</span></span><span class=line><span class=ln>32</span><span class=cl>    <span class=kd>private</span> <span class=nf>CommandProxy</span><span class=o>(</span><span class=n>Object</span> <span class=n>obj</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>obj</span> <span class=o>=</span> <span class=n>obj</span><span class=o>;</span>
</span></span><span class=line><span class=ln>34</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>
</span></span><span class=line><span class=ln>36</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>Object</span> <span class=nf>newInstance</span><span class=o>(</span><span class=n>Object</span> <span class=n>obj</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>        <span class=k>return</span> <span class=n>java</span><span class=o>.</span><span class=na>lang</span><span class=o>.</span><span class=na>reflect</span><span class=o>.</span><span class=na>Proxy</span><span class=o>.</span><span class=na>newProxyInstance</span><span class=o>(</span><span class=n>obj</span><span class=o>.</span><span class=na>getClass</span><span class=o>().</span><span class=na>getClassLoader</span><span class=o>(),</span> <span class=n>obj</span><span class=o>.</span><span class=na>getClass</span><span class=o>().</span><span class=na>getInterfaces</span><span class=o>(),</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>                <span class=k>new</span> <span class=n>CommandProxy</span><span class=o>(</span><span class=n>obj</span><span class=o>));</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>40</span><span class=cl>
</span></span><span class=line><span class=ln>41</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>42</span><span class=cl>    <span class=kd>public</span> <span class=n>Object</span> <span class=nf>invoke</span><span class=o>(</span><span class=n>Object</span> <span class=n>proxy</span><span class=o>,</span> <span class=n>Method</span> <span class=n>method</span><span class=o>,</span> <span class=n>Object</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>Throwable</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>43</span><span class=cl>        <span class=n>Object</span> <span class=n>result</span><span class=o>;</span>
</span></span><span class=line><span class=ln>44</span><span class=cl>        <span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>45</span><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>args</span><span class=o>[</span><span class=n>0</span><span class=o>].</span><span class=na>equals</span><span class=o>(</span><span class=s>&#34;rm&#34;</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>46</span><span class=cl>                <span class=k>throw</span> <span class=k>new</span> <span class=n>IllegalAccessException</span><span class=o>(</span><span class=s>&#34;rm command not allowed&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>47</span><span class=cl>            <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>48</span><span class=cl>                <span class=n>result</span> <span class=o>=</span> <span class=n>method</span><span class=o>.</span><span class=na>invoke</span><span class=o>(</span><span class=n>obj</span><span class=o>,</span> <span class=n>args</span><span class=o>);</span>
</span></span><span class=line><span class=ln>49</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>50</span><span class=cl>            <span class=k>return</span> <span class=n>result</span><span class=o>;</span>
</span></span><span class=line><span class=ln>51</span><span class=cl>        <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>InvocationTargetException</span> <span class=n>ex</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>52</span><span class=cl>            <span class=k>throw</span> <span class=n>ex</span><span class=o>.</span><span class=na>getTargetException</span><span class=o>();</span>
</span></span><span class=line><span class=ln>53</span><span class=cl>        <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>Exception</span> <span class=n>ex</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>54</span><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=n>RuntimeException</span><span class=o>(</span><span class=s>&#34;invocation exception &#34;</span> <span class=o>+</span> <span class=n>ex</span><span class=o>.</span><span class=na>getMessage</span><span class=o>());</span>
</span></span><span class=line><span class=ln>55</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>56</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>57</span><span class=cl>
</span></span><span class=line><span class=ln>58</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h3 id=4-flyweight-pattern>4. Flyweight Pattern</h3><p>Flyweight pattern is used when we need to create a lot of Objects of a class eg 100,000 objects. Reduce cost of storage for large objects by sharing. When we share objects we need to determine what is intrinsic and extrinsic attributes. Here beeType is an intrinsic state and will be shared by all bees. The (x,y) coordinates are the extrinsic properties which will vary for each object. Notice that a factory pattern is also seen in the flyweight example below.</p><p><figure><picture><img loading=lazy decoding=async alt class="image_figure image_internal image_processed" width=907 height=520 src=/post/design-patterns/flyweight-pattern-visual.png></picture></figure></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.flyweight</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.HashMap</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.Random</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.concurrent.TimeUnit</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.SneakyThrows</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=c1>//divide Object property into intrinsic and extrinsic properties
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=c1></span><span class=kd>enum</span> <span class=n>BeeType</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=n>WORKER</span><span class=o>,</span> <span class=n>ATTACKER</span><span class=o>;</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>BeeType</span> <span class=nf>getRandom</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>        <span class=k>return</span> <span class=n>BeeType</span><span class=o>.</span><span class=na>values</span><span class=o>()[</span><span class=k>new</span> <span class=n>Random</span><span class=o>().</span><span class=na>nextInt</span><span class=o>(</span><span class=n>2</span><span class=o>)];</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>15</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>
</span></span><span class=line><span class=ln>17</span><span class=cl><span class=kd>interface</span> <span class=nc>Bee</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>carryOutMission</span><span class=o>(</span><span class=kt>int</span> <span class=n>x</span><span class=o>,</span> <span class=kt>int</span> <span class=n>y</span><span class=o>);</span>
</span></span><span class=line><span class=ln>19</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>
</span></span><span class=line><span class=ln>21</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>
</span></span><span class=line><span class=ln>23</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>100000</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>            <span class=kt>int</span> <span class=n>posx</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Random</span><span class=o>().</span><span class=na>nextInt</span><span class=o>(</span><span class=n>10</span><span class=o>);</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>            <span class=kt>int</span> <span class=n>posy</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Random</span><span class=o>().</span><span class=na>nextInt</span><span class=o>(</span><span class=n>10</span><span class=o>);</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>            <span class=n>FlyweightBeeFactory</span><span class=o>.</span><span class=na>getBeeType</span><span class=o>(</span><span class=n>BeeType</span><span class=o>.</span><span class=na>getRandom</span><span class=o>()).</span><span class=na>carryOutMission</span><span class=o>(</span><span class=n>posx</span><span class=o>,</span> <span class=n>posy</span><span class=o>);</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Total Bee objects created:&#34;</span> <span class=o>+</span> <span class=n>FlyweightBeeFactory</span><span class=o>.</span><span class=na>bees</span><span class=o>.</span><span class=na>size</span><span class=o>());</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>31</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>
</span></span><span class=line><span class=ln>33</span><span class=cl><span class=kd>class</span> <span class=nc>WorkerBee</span> <span class=kd>implements</span> <span class=n>Bee</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>34</span><span class=cl>
</span></span><span class=line><span class=ln>35</span><span class=cl>    <span class=nd>@SneakyThrows</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>    <span class=kd>public</span> <span class=nf>WorkerBee</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>        <span class=c1>//Takes long time
</span></span></span><span class=line><span class=ln>38</span><span class=cl><span class=c1></span>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Creating worker bee!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>        <span class=n>TimeUnit</span><span class=o>.</span><span class=na>SECONDS</span><span class=o>.</span><span class=na>sleep</span><span class=o>(</span><span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=ln>40</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>41</span><span class=cl>
</span></span><span class=line><span class=ln>42</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>43</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>carryOutMission</span><span class=o>(</span><span class=kt>int</span> <span class=n>x</span><span class=o>,</span> <span class=kt>int</span> <span class=n>y</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>44</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Depositing honey at (&#34;</span> <span class=o>+</span> <span class=n>x</span> <span class=o>+</span> <span class=s>&#34;,&#34;</span> <span class=o>+</span> <span class=n>y</span> <span class=o>+</span> <span class=s>&#34;) quadrant!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>45</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>46</span><span class=cl>
</span></span><span class=line><span class=ln>47</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>48</span><span class=cl>
</span></span><span class=line><span class=ln>49</span><span class=cl><span class=kd>class</span> <span class=nc>AttackBee</span> <span class=kd>implements</span> <span class=n>Bee</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>50</span><span class=cl>
</span></span><span class=line><span class=ln>51</span><span class=cl>    <span class=nd>@SneakyThrows</span>
</span></span><span class=line><span class=ln>52</span><span class=cl>    <span class=kd>public</span> <span class=nf>AttackBee</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>53</span><span class=cl>        <span class=c1>//Takes long time
</span></span></span><span class=line><span class=ln>54</span><span class=cl><span class=c1></span>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Creating attack bee!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>55</span><span class=cl>        <span class=n>TimeUnit</span><span class=o>.</span><span class=na>SECONDS</span><span class=o>.</span><span class=na>sleep</span><span class=o>(</span><span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=ln>56</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>57</span><span class=cl>
</span></span><span class=line><span class=ln>58</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>59</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>carryOutMission</span><span class=o>(</span><span class=kt>int</span> <span class=n>x</span><span class=o>,</span> <span class=kt>int</span> <span class=n>y</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>60</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Defending (&#34;</span> <span class=o>+</span> <span class=n>x</span> <span class=o>+</span> <span class=s>&#34;,&#34;</span> <span class=o>+</span> <span class=n>y</span> <span class=o>+</span> <span class=s>&#34;) quadrant!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>61</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>62</span><span class=cl>
</span></span><span class=line><span class=ln>63</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>64</span><span class=cl>
</span></span><span class=line><span class=ln>65</span><span class=cl><span class=kd>class</span> <span class=nc>FlyweightBeeFactory</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>66</span><span class=cl>
</span></span><span class=line><span class=ln>67</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>HashMap</span><span class=o>&lt;</span><span class=n>BeeType</span><span class=o>,</span> <span class=n>Bee</span><span class=o>&gt;</span> <span class=n>bees</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=ln>68</span><span class=cl>
</span></span><span class=line><span class=ln>69</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>Bee</span> <span class=nf>getBeeType</span><span class=o>(</span><span class=n>BeeType</span> <span class=n>beeType</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>70</span><span class=cl>        <span class=n>Bee</span> <span class=n>bee</span> <span class=o>=</span> <span class=n>bees</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>beeType</span><span class=o>);</span>
</span></span><span class=line><span class=ln>71</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>bee</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>72</span><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>beeType</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>BeeType</span><span class=o>.</span><span class=na>WORKER</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>73</span><span class=cl>                <span class=n>bee</span> <span class=o>=</span> <span class=k>new</span> <span class=n>WorkerBee</span><span class=o>();</span>
</span></span><span class=line><span class=ln>74</span><span class=cl>            <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>75</span><span class=cl>                <span class=n>bee</span> <span class=o>=</span> <span class=k>new</span> <span class=n>AttackBee</span><span class=o>();</span>
</span></span><span class=line><span class=ln>76</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>77</span><span class=cl>            <span class=n>bees</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=n>beeType</span><span class=o>,</span> <span class=n>bee</span><span class=o>);</span>
</span></span><span class=line><span class=ln>78</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>79</span><span class=cl>        <span class=k>return</span> <span class=n>bee</span><span class=o>;</span>
</span></span><span class=line><span class=ln>80</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>81</span><span class=cl>
</span></span><span class=line><span class=ln>82</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>...
</span></span><span class=line><span class=ln>2</span><span class=cl>...
</span></span><span class=line><span class=ln>3</span><span class=cl>WORKER_LEADER, Depositing honey at <span class=o>(</span>9,50<span class=o>)</span> quadrant!
</span></span><span class=line><span class=ln>4</span><span class=cl>ATTACKER, Depositing honey at <span class=o>(</span>75,68<span class=o>)</span> quadrant!
</span></span><span class=line><span class=ln>5</span><span class=cl>WORKER_LEADER, Depositing honey at <span class=o>(</span>25,78<span class=o>)</span> quadrant!
</span></span><span class=line><span class=ln>6</span><span class=cl>Total Bee objects created:4
</span></span></code></pre></div><p>Now lets look at how the bad design would have looked, Here we end up creating large number of objects there by wasting memory. In the solution above we have moved out the extrinsic properties from the Bee class so that we can share the objects.</p><p><span style=color:red;font-size:large;font-weight:700>Bad Design Alert!</span></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.flyweight.bad</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.Random</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.concurrent.TimeUnit</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.AllArgsConstructor</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.SneakyThrows</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=kd>enum</span> <span class=n>BeeType</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=n>WORKER</span><span class=o>,</span> <span class=n>ATTACKER</span><span class=o>;</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>BeeType</span> <span class=nf>getRandom</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>        <span class=c1>//Returns random bee types.
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=c1></span>        <span class=k>return</span> <span class=n>BeeType</span><span class=o>.</span><span class=na>values</span><span class=o>()[</span><span class=k>new</span> <span class=n>Random</span><span class=o>().</span><span class=na>nextInt</span><span class=o>(</span><span class=n>2</span><span class=o>)];</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>15</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>
</span></span><span class=line><span class=ln>17</span><span class=cl><span class=kd>interface</span> <span class=nc>Bee</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>carryOutMission</span><span class=o>(</span><span class=kt>int</span> <span class=n>x</span><span class=o>,</span> <span class=kt>int</span> <span class=n>y</span><span class=o>);</span>
</span></span><span class=line><span class=ln>19</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>
</span></span><span class=line><span class=ln>21</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>
</span></span><span class=line><span class=ln>23</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>        <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>        <span class=k>for</span> <span class=o>(;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>100000</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>            <span class=kt>int</span> <span class=n>posx</span> <span class=o>=</span>  <span class=k>new</span> <span class=n>Random</span><span class=o>().</span><span class=na>nextInt</span><span class=o>(</span><span class=n>10</span><span class=o>);</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>            <span class=kt>int</span> <span class=n>posy</span> <span class=o>=</span>  <span class=k>new</span> <span class=n>Random</span><span class=o>().</span><span class=na>nextInt</span><span class=o>(</span><span class=n>10</span><span class=o>);</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>            <span class=n>BeeType</span> <span class=n>type</span> <span class=o>=</span> <span class=n>BeeType</span><span class=o>.</span><span class=na>getRandom</span><span class=o>();</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>            <span class=k>if</span><span class=o>(</span><span class=n>type</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>BeeType</span><span class=o>.</span><span class=na>WORKER</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>                <span class=k>new</span> <span class=n>WorkerBee</span><span class=o>(</span><span class=n>BeeType</span><span class=o>.</span><span class=na>getRandom</span><span class=o>()).</span><span class=na>carryOutMission</span><span class=o>(</span><span class=n>posx</span><span class=o>,</span><span class=n>posy</span><span class=o>);</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>            <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>                <span class=k>new</span> <span class=n>AttackBee</span><span class=o>(</span><span class=n>BeeType</span><span class=o>.</span><span class=na>getRandom</span><span class=o>()).</span><span class=na>carryOutMission</span><span class=o>(</span><span class=n>posx</span><span class=o>,</span><span class=n>posy</span><span class=o>);</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>34</span><span class=cl>
</span></span><span class=line><span class=ln>35</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Total Bee objects created:&#34;</span> <span class=o>+</span> <span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>38</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>
</span></span><span class=line><span class=ln>40</span><span class=cl><span class=kd>class</span> <span class=nc>WorkerBee</span> <span class=kd>implements</span> <span class=n>Bee</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>41</span><span class=cl>
</span></span><span class=line><span class=ln>42</span><span class=cl>    <span class=n>BeeType</span> <span class=n>beeType</span><span class=o>;</span>
</span></span><span class=line><span class=ln>43</span><span class=cl>
</span></span><span class=line><span class=ln>44</span><span class=cl>    <span class=nd>@SneakyThrows</span>
</span></span><span class=line><span class=ln>45</span><span class=cl>    <span class=kd>public</span> <span class=nf>WorkerBee</span><span class=o>(</span><span class=n>BeeType</span> <span class=n>beeType</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>46</span><span class=cl>        <span class=c1>//Takes long time
</span></span></span><span class=line><span class=ln>47</span><span class=cl><span class=c1></span>        <span class=n>TimeUnit</span><span class=o>.</span><span class=na>SECONDS</span><span class=o>.</span><span class=na>sleep</span><span class=o>(</span><span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=ln>48</span><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>beeType</span> <span class=o>=</span> <span class=n>beeType</span><span class=o>;</span>
</span></span><span class=line><span class=ln>49</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>50</span><span class=cl>
</span></span><span class=line><span class=ln>51</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>52</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>carryOutMission</span><span class=o>(</span><span class=kt>int</span> <span class=n>x</span><span class=o>,</span> <span class=kt>int</span> <span class=n>y</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>53</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>beeType</span> <span class=o>+</span> <span class=s>&#34;, Depositing honey at (&#34;</span> <span class=o>+</span> <span class=n>x</span> <span class=o>+</span> <span class=s>&#34;,&#34;</span> <span class=o>+</span> <span class=n>y</span> <span class=o>+</span> <span class=s>&#34;) quadrant!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>54</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>55</span><span class=cl>
</span></span><span class=line><span class=ln>56</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>57</span><span class=cl>
</span></span><span class=line><span class=ln>58</span><span class=cl><span class=kd>class</span> <span class=nc>AttackBee</span> <span class=kd>implements</span> <span class=n>Bee</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>59</span><span class=cl>
</span></span><span class=line><span class=ln>60</span><span class=cl>    <span class=n>BeeType</span> <span class=n>beeType</span><span class=o>;</span>
</span></span><span class=line><span class=ln>61</span><span class=cl>
</span></span><span class=line><span class=ln>62</span><span class=cl>    <span class=nd>@SneakyThrows</span>
</span></span><span class=line><span class=ln>63</span><span class=cl>    <span class=kd>public</span> <span class=nf>AttackBee</span><span class=o>(</span><span class=n>BeeType</span> <span class=n>beeType</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>64</span><span class=cl>        <span class=c1>//Takes long time
</span></span></span><span class=line><span class=ln>65</span><span class=cl><span class=c1></span>        <span class=n>TimeUnit</span><span class=o>.</span><span class=na>SECONDS</span><span class=o>.</span><span class=na>sleep</span><span class=o>(</span><span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=ln>66</span><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>beeType</span> <span class=o>=</span> <span class=n>beeType</span><span class=o>;</span>
</span></span><span class=line><span class=ln>67</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>68</span><span class=cl>
</span></span><span class=line><span class=ln>69</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>70</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>carryOutMission</span><span class=o>(</span><span class=kt>int</span> <span class=n>x</span><span class=o>,</span> <span class=kt>int</span> <span class=n>y</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>71</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>beeType</span> <span class=o>+</span> <span class=s>&#34;, Defending (&#34;</span> <span class=o>+</span> <span class=n>x</span> <span class=o>+</span> <span class=s>&#34;,&#34;</span> <span class=o>+</span> <span class=n>y</span> <span class=o>+</span> <span class=s>&#34;) quadrant!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>72</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>73</span><span class=cl>
</span></span><span class=line><span class=ln>74</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>...
</span></span><span class=line><span class=ln>2</span><span class=cl>...
</span></span><span class=line><span class=ln>3</span><span class=cl>WORKER_LEADER, Depositing honey at <span class=o>(</span>77,41<span class=o>)</span> quadrant!
</span></span><span class=line><span class=ln>4</span><span class=cl>ATTACKER_LEADER, Depositing honey at <span class=o>(</span>54,35<span class=o>)</span> quadrant!
</span></span><span class=line><span class=ln>5</span><span class=cl>WORKER, Depositing honey at <span class=o>(</span>7,17<span class=o>)</span> quadrant!
</span></span><span class=line><span class=ln>6</span><span class=cl>Total Bee objects created:100000
</span></span></code></pre></div><h3 id=5-facade-pattern>5. Facade Pattern</h3><p>Facade pattern is used to give unified interface to a set of interfaces in a subsystem.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.facade</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=c1>//makes the subsystem easier to use
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=c1></span><span class=kd>enum</span> <span class=n>DbType</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=n>ORACLE</span><span class=o>,</span> <span class=n>MYSQL</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>        <span class=n>HelperFacade</span><span class=o>.</span><span class=na>generateReport</span><span class=o>(</span><span class=n>DbType</span><span class=o>.</span><span class=na>ORACLE</span><span class=o>);</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>        <span class=n>HelperFacade</span><span class=o>.</span><span class=na>generateReport</span><span class=o>(</span><span class=n>DbType</span><span class=o>.</span><span class=na>MYSQL</span><span class=o>);</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>13</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>
</span></span><span class=line><span class=ln>15</span><span class=cl><span class=kd>class</span> <span class=nc>MysqlHelper</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>mysqlReport</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Generating report in mysql&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>20</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>
</span></span><span class=line><span class=ln>22</span><span class=cl><span class=kd>class</span> <span class=nc>OracleHelper</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>
</span></span><span class=line><span class=ln>24</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>oracleReport</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Generating report in oracle&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>
</span></span><span class=line><span class=ln>28</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>
</span></span><span class=line><span class=ln>30</span><span class=cl><span class=kd>class</span> <span class=nc>HelperFacade</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>
</span></span><span class=line><span class=ln>32</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>generateReport</span><span class=o>(</span><span class=n>DbType</span> <span class=n>db</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>
</span></span><span class=line><span class=ln>34</span><span class=cl>        <span class=k>switch</span> <span class=o>(</span><span class=n>db</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>            <span class=k>case</span> <span class=n>ORACLE</span><span class=o>:</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>                <span class=n>OracleHelper</span> <span class=n>ohelper</span> <span class=o>=</span> <span class=k>new</span> <span class=n>OracleHelper</span><span class=o>();</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>                <span class=n>ohelper</span><span class=o>.</span><span class=na>oracleReport</span><span class=o>();</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>                <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>            <span class=k>case</span> <span class=n>MYSQL</span><span class=o>:</span>
</span></span><span class=line><span class=ln>40</span><span class=cl>                <span class=n>MysqlHelper</span> <span class=n>mhelper</span> <span class=o>=</span> <span class=k>new</span> <span class=n>MysqlHelper</span><span class=o>();</span>
</span></span><span class=line><span class=ln>41</span><span class=cl>                <span class=n>mhelper</span><span class=o>.</span><span class=na>mysqlReport</span><span class=o>();</span>
</span></span><span class=line><span class=ln>42</span><span class=cl>                <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>43</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>44</span><span class=cl>
</span></span><span class=line><span class=ln>45</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>46</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>Generating report in oracle
</span></span><span class=line><span class=ln>2</span><span class=cl>Generating report in mysql
</span></span></code></pre></div><h3 id=6-bridge-pattern>6. Bridge Pattern</h3><p>Bridge Pattern is used to decouple the interfaces from implementation. Prefer Composition over inheritance. There are interface hierarchies in both interfaces as well a implementations.</p><p><figure><picture><img loading=lazy decoding=async alt class="image_figure image_internal image_processed" width=1100 height=430 src=/post/design-patterns/bridge-pattern-visual.png></picture></figure></p><p>By decoupling the switch & electric device from each other each can vary independently. You can add new switches, you can add new electric devices independently without increasing complexity.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.bridge</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.AllArgsConstructor</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=c1>//Decouple an abstraction from its implementation so that the two can vary independently
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=c1></span><span class=kd>interface</span> <span class=nc>Color</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>applyColor</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>        <span class=n>Shape</span> <span class=n>tri</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Triangle</span><span class=o>(</span><span class=k>new</span> <span class=n>RedColor</span><span class=o>());</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>        <span class=n>tri</span><span class=o>.</span><span class=na>applyColor</span><span class=o>();</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>        <span class=n>Shape</span> <span class=n>sqr</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Square</span><span class=o>(</span><span class=k>new</span> <span class=n>GreenColor</span><span class=o>());</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>        <span class=n>sqr</span><span class=o>.</span><span class=na>applyColor</span><span class=o>();</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>
</span></span><span class=line><span class=ln>19</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>
</span></span><span class=line><span class=ln>21</span><span class=cl><span class=kd>class</span> <span class=nc>GreenColor</span> <span class=kd>implements</span> <span class=n>Color</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>applyColor</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;green!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>26</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>
</span></span><span class=line><span class=ln>28</span><span class=cl><span class=kd>class</span> <span class=nc>RedColor</span> <span class=kd>implements</span> <span class=n>Color</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>applyColor</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;red!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>32</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>
</span></span><span class=line><span class=ln>34</span><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=ln>35</span><span class=cl><span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>Shape</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>
</span></span><span class=line><span class=ln>37</span><span class=cl>    <span class=kd>protected</span> <span class=n>Color</span> <span class=n>color</span><span class=o>;</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>
</span></span><span class=line><span class=ln>39</span><span class=cl>    <span class=kd>public</span> <span class=kd>abstract</span> <span class=kt>void</span> <span class=nf>applyColor</span><span class=o>();</span>
</span></span><span class=line><span class=ln>40</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>41</span><span class=cl>
</span></span><span class=line><span class=ln>42</span><span class=cl><span class=kd>class</span> <span class=nc>Square</span> <span class=kd>extends</span> <span class=n>Shape</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>43</span><span class=cl>
</span></span><span class=line><span class=ln>44</span><span class=cl>    <span class=kd>public</span> <span class=nf>Square</span><span class=o>(</span><span class=n>Color</span> <span class=n>c</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>45</span><span class=cl>        <span class=kd>super</span><span class=o>(</span><span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=ln>46</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>47</span><span class=cl>
</span></span><span class=line><span class=ln>48</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>49</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>applyColor</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>50</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=s>&#34;Square filled with color &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>51</span><span class=cl>        <span class=n>color</span><span class=o>.</span><span class=na>applyColor</span><span class=o>();</span>
</span></span><span class=line><span class=ln>52</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>53</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>54</span><span class=cl>
</span></span><span class=line><span class=ln>55</span><span class=cl><span class=kd>class</span> <span class=nc>Triangle</span> <span class=kd>extends</span> <span class=n>Shape</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>56</span><span class=cl>
</span></span><span class=line><span class=ln>57</span><span class=cl>    <span class=kd>public</span> <span class=nf>Triangle</span><span class=o>(</span><span class=n>Color</span> <span class=n>c</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>58</span><span class=cl>        <span class=kd>super</span><span class=o>(</span><span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=ln>59</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>60</span><span class=cl>
</span></span><span class=line><span class=ln>61</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>62</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>applyColor</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>63</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=s>&#34;Triangle filled with color &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>64</span><span class=cl>        <span class=n>color</span><span class=o>.</span><span class=na>applyColor</span><span class=o>();</span>
</span></span><span class=line><span class=ln>65</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>66</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>Pulled Switch, Now turning on :Light!
</span></span><span class=line><span class=ln>2</span><span class=cl>----------------
</span></span><span class=line><span class=ln>3</span><span class=cl>Pressed Switch, Now turning on :Fan!
</span></span></code></pre></div><p>UML of Bridge Pattern. There is a bridge between Switch class and ElectricDevice class.</p><p><figure><picture><img loading=lazy decoding=async alt class="image_figure image_internal image_processed" width=810 height=308 src=/post/design-patterns/bridge.png></picture></figure></p><p><span style=color:red;font-size:large;font-weight:700>Bad Design Alert!</span></p><p>Lets look at how a problematic code looks like and its eligibility for bridge pattern. In the below code trying to add a new Electric Device + Switch combination is a pain which is solved by the bridge pattern mentioned above.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.bridge.badway</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>        <span class=n>PullSwitch</span> <span class=n>switch1</span> <span class=o>=</span> <span class=k>new</span> <span class=n>PullSwitchFan</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>        <span class=n>PressSwitch</span> <span class=n>switch2</span> <span class=o>=</span> <span class=k>new</span> <span class=n>PressSwitchLight</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>        <span class=n>switch1</span><span class=o>.</span><span class=na>toggle</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>        <span class=n>switch2</span><span class=o>.</span><span class=na>toggle</span><span class=o>();</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>
</span></span><span class=line><span class=ln>13</span><span class=cl><span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>Switch</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>    <span class=kd>abstract</span> <span class=kd>public</span> <span class=kt>void</span> <span class=nf>toggle</span><span class=o>();</span>
</span></span><span class=line><span class=ln>15</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>
</span></span><span class=line><span class=ln>17</span><span class=cl><span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>PullSwitch</span> <span class=kd>extends</span> <span class=n>Switch</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>18</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>
</span></span><span class=line><span class=ln>20</span><span class=cl><span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>PressSwitch</span> <span class=kd>extends</span> <span class=n>Switch</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>21</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>
</span></span><span class=line><span class=ln>23</span><span class=cl><span class=kd>class</span> <span class=nc>PullSwitchFan</span> <span class=kd>extends</span> <span class=n>PullSwitch</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>
</span></span><span class=line><span class=ln>25</span><span class=cl>    <span class=kt>boolean</span> <span class=n>state</span><span class=o>;</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>
</span></span><span class=line><span class=ln>27</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>toggle</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>state</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Pulled Switch, Now turning off fan&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>            <span class=n>state</span> <span class=o>=</span> <span class=n>Boolean</span><span class=o>.</span><span class=na>FALSE</span><span class=o>;</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Pulled Switch, Now turning on fan&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>34</span><span class=cl>            <span class=n>state</span> <span class=o>=</span> <span class=n>Boolean</span><span class=o>.</span><span class=na>TRUE</span><span class=o>;</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>37</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>
</span></span><span class=line><span class=ln>39</span><span class=cl><span class=kd>class</span> <span class=nc>PullSwitchLight</span> <span class=kd>extends</span> <span class=n>PullSwitch</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>40</span><span class=cl>
</span></span><span class=line><span class=ln>41</span><span class=cl>    <span class=kt>boolean</span> <span class=n>state</span><span class=o>;</span>
</span></span><span class=line><span class=ln>42</span><span class=cl>
</span></span><span class=line><span class=ln>43</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>44</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>toggle</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>45</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>state</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>46</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Pulled Switch, Now turning off light&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>47</span><span class=cl>            <span class=n>state</span> <span class=o>=</span> <span class=n>Boolean</span><span class=o>.</span><span class=na>FALSE</span><span class=o>;</span>
</span></span><span class=line><span class=ln>48</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>49</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Pulled Switch, Now turning on light&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>50</span><span class=cl>            <span class=n>state</span> <span class=o>=</span> <span class=n>Boolean</span><span class=o>.</span><span class=na>TRUE</span><span class=o>;</span>
</span></span><span class=line><span class=ln>51</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>52</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>53</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>54</span><span class=cl>
</span></span><span class=line><span class=ln>55</span><span class=cl><span class=kd>class</span> <span class=nc>PressSwitchFan</span> <span class=kd>extends</span> <span class=n>PressSwitch</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>56</span><span class=cl>
</span></span><span class=line><span class=ln>57</span><span class=cl>    <span class=kt>boolean</span> <span class=n>state</span><span class=o>;</span>
</span></span><span class=line><span class=ln>58</span><span class=cl>
</span></span><span class=line><span class=ln>59</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>60</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>toggle</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>61</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>state</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>62</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Pressed Switch, Now turning off fan&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>63</span><span class=cl>            <span class=n>state</span> <span class=o>=</span> <span class=n>Boolean</span><span class=o>.</span><span class=na>FALSE</span><span class=o>;</span>
</span></span><span class=line><span class=ln>64</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>65</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Pressed Switch, Now turning on fan&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>66</span><span class=cl>            <span class=n>state</span> <span class=o>=</span> <span class=n>Boolean</span><span class=o>.</span><span class=na>TRUE</span><span class=o>;</span>
</span></span><span class=line><span class=ln>67</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>68</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>69</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>70</span><span class=cl>
</span></span><span class=line><span class=ln>71</span><span class=cl><span class=kd>class</span> <span class=nc>PressSwitchLight</span> <span class=kd>extends</span> <span class=n>PressSwitch</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>72</span><span class=cl>
</span></span><span class=line><span class=ln>73</span><span class=cl>    <span class=kt>boolean</span> <span class=n>state</span><span class=o>;</span>
</span></span><span class=line><span class=ln>74</span><span class=cl>
</span></span><span class=line><span class=ln>75</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>76</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>toggle</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>77</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>state</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>78</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Pressed Switch, Now turning off light&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>79</span><span class=cl>            <span class=n>state</span> <span class=o>=</span> <span class=n>Boolean</span><span class=o>.</span><span class=na>FALSE</span><span class=o>;</span>
</span></span><span class=line><span class=ln>80</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>81</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Pressed Switch, Now turning on light&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>82</span><span class=cl>            <span class=n>state</span> <span class=o>=</span> <span class=n>Boolean</span><span class=o>.</span><span class=na>TRUE</span><span class=o>;</span>
</span></span><span class=line><span class=ln>83</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>84</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>85</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>Pulled Switch, Now turning on fan
</span></span><span class=line><span class=ln>2</span><span class=cl>Pressed Switch, Now turning on light
</span></span></code></pre></div><p>UML Diagram of problematic code, you can see that heirarchy exists.</p><p><figure><picture><img loading=lazy decoding=async alt class="image_figure image_internal image_processed" width=737 height=346 src=/post/design-patterns/bridge-bad.png></picture></figure></p><h3 id=7-decorator-pattern>7. Decorator Pattern</h3><p>Decorator design pattern is used to add the functionality by wrapping another class around the core class without modifying the core class. Disadvantage of decorator pattern is that it uses a lot of similar kind of objects.</p><p><figure><picture><img loading=lazy decoding=async alt class="image_figure image_internal image_processed" width=865 height=160 src=/post/design-patterns/decorator-pattern-visual.png></picture></figure></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.decorator</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>java.math.BigDecimal</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.AllArgsConstructor</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>        <span class=n>Pizza</span> <span class=n>pizza</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ThickCrustPizza</span><span class=o>();</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Pizza: &#34;</span> <span class=o>+</span> <span class=n>pizza</span><span class=o>.</span><span class=na>getDescription</span><span class=o>());</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Cost: &#34;</span> <span class=o>+</span> <span class=n>pizza</span><span class=o>.</span><span class=na>getCost</span><span class=o>());</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>
</span></span><span class=line><span class=ln>14</span><span class=cl>        <span class=n>Cheese</span> <span class=n>cheese</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Cheese</span><span class=o>(</span><span class=n>pizza</span><span class=o>);</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Pizza: &#34;</span> <span class=o>+</span> <span class=n>cheese</span><span class=o>.</span><span class=na>getDescription</span><span class=o>());</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Cost: &#34;</span> <span class=o>+</span> <span class=n>cheese</span><span class=o>.</span><span class=na>getCost</span><span class=o>());</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>
</span></span><span class=line><span class=ln>18</span><span class=cl>        <span class=n>Cheese</span> <span class=n>doubleCheese</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Cheese</span><span class=o>(</span><span class=n>cheese</span><span class=o>);</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Pizza: &#34;</span> <span class=o>+</span> <span class=n>doubleCheese</span><span class=o>.</span><span class=na>getDescription</span><span class=o>());</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Cost: &#34;</span> <span class=o>+</span> <span class=n>doubleCheese</span><span class=o>.</span><span class=na>getCost</span><span class=o>());</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>
</span></span><span class=line><span class=ln>23</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>
</span></span><span class=line><span class=ln>25</span><span class=cl><span class=kd>interface</span> <span class=nc>Pizza</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getDescription</span><span class=o>();</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>    <span class=kd>public</span> <span class=n>BigDecimal</span> <span class=nf>getCost</span><span class=o>();</span>
</span></span><span class=line><span class=ln>28</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>
</span></span><span class=line><span class=ln>30</span><span class=cl><span class=kd>class</span> <span class=nc>ThickCrustPizza</span> <span class=kd>implements</span> <span class=n>Pizza</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>
</span></span><span class=line><span class=ln>32</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getDescription</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>34</span><span class=cl>        <span class=k>return</span> <span class=s>&#34;Thick Crust Pizza&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>
</span></span><span class=line><span class=ln>37</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>    <span class=kd>public</span> <span class=n>BigDecimal</span> <span class=nf>getCost</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>BigDecimal</span><span class=o>(</span><span class=n>10</span><span class=o>.</span><span class=na>00</span><span class=o>);</span>
</span></span><span class=line><span class=ln>40</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>41</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>42</span><span class=cl>
</span></span><span class=line><span class=ln>43</span><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=ln>44</span><span class=cl><span class=kd>class</span> <span class=nc>PizzaToppingDecorator</span> <span class=kd>implements</span> <span class=n>Pizza</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>45</span><span class=cl>
</span></span><span class=line><span class=ln>46</span><span class=cl>    <span class=n>Pizza</span> <span class=n>pizza</span><span class=o>;</span>
</span></span><span class=line><span class=ln>47</span><span class=cl>
</span></span><span class=line><span class=ln>48</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>49</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getDescription</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>50</span><span class=cl>        <span class=k>return</span> <span class=n>pizza</span><span class=o>.</span><span class=na>getDescription</span><span class=o>();</span>
</span></span><span class=line><span class=ln>51</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>52</span><span class=cl>
</span></span><span class=line><span class=ln>53</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>54</span><span class=cl>    <span class=kd>public</span> <span class=n>BigDecimal</span> <span class=nf>getCost</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>55</span><span class=cl>        <span class=k>return</span> <span class=n>pizza</span><span class=o>.</span><span class=na>getCost</span><span class=o>();</span>
</span></span><span class=line><span class=ln>56</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>57</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>58</span><span class=cl>
</span></span><span class=line><span class=ln>59</span><span class=cl><span class=kd>class</span> <span class=nc>Cheese</span> <span class=kd>extends</span> <span class=n>PizzaToppingDecorator</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>60</span><span class=cl>
</span></span><span class=line><span class=ln>61</span><span class=cl>    <span class=kd>public</span> <span class=nf>Cheese</span><span class=o>(</span><span class=n>Pizza</span> <span class=n>pizza</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>62</span><span class=cl>        <span class=kd>super</span><span class=o>(</span><span class=n>pizza</span><span class=o>);</span>
</span></span><span class=line><span class=ln>63</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>64</span><span class=cl>
</span></span><span class=line><span class=ln>65</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>66</span><span class=cl>    <span class=kd>public</span> <span class=n>BigDecimal</span> <span class=nf>getCost</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>67</span><span class=cl>        <span class=k>return</span> <span class=o>(</span><span class=k>new</span> <span class=n>BigDecimal</span><span class=o>(</span><span class=n>2</span><span class=o>.</span><span class=na>00</span><span class=o>).</span><span class=na>add</span><span class=o>(</span><span class=n>pizza</span><span class=o>.</span><span class=na>getCost</span><span class=o>()));</span>
</span></span><span class=line><span class=ln>68</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>69</span><span class=cl>
</span></span><span class=line><span class=ln>70</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>71</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getDescription</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>72</span><span class=cl>        <span class=k>return</span> <span class=n>pizza</span><span class=o>.</span><span class=na>getDescription</span><span class=o>()</span> <span class=o>+</span> <span class=s>&#34; + Cheese&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln>73</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>74</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>Pizza: Thick Crust Pizza
</span></span><span class=line><span class=ln>2</span><span class=cl>Cost: <span class=m>10</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>Pizza: Thick Crust Pizza + Cheese
</span></span><span class=line><span class=ln>4</span><span class=cl>Cost: <span class=m>12</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>Pizza: Thick Crust Pizza + Cheese + Cheese
</span></span><span class=line><span class=ln>6</span><span class=cl>Cost: <span class=m>14</span>
</span></span></code></pre></div><p>UML of Decorator Pattern</p><p><figure><picture><img loading=lazy decoding=async alt class="image_figure image_internal image_processed" width=530 height=449 src=/post/design-patterns/decorator.png></picture></figure></p><h2 id=behavioral-design-patterns>Behavioral Design Patterns</h2><p>Behavioral patterns help design classes with better interaction between objects and provide lose coupling.</p><h3 id=1-template-pattern>1. Template Pattern</h3><p>Template Pattern used to create a method stub and deferring some of the steps of implementation to the subclasses. Template method defines the steps to execute an algorithm and it can provide default implementation that might be common for all or some of the subclasses.</p><p><figure><picture><img loading=lazy decoding=async alt class="image_figure image_internal image_processed" width=301 height=301 src=/post/design-patterns/template-pattern-visual.png></picture></figure></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.template</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>        <span class=n>HouseTemplate</span> <span class=n>houseType</span> <span class=o>=</span> <span class=k>new</span> <span class=n>WoodenHouse</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>        <span class=n>houseType</span><span class=o>.</span><span class=na>buildHouse</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;-------------------------&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>        <span class=n>houseType</span> <span class=o>=</span> <span class=k>new</span> <span class=n>GlassHouse</span><span class=o>();</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>        <span class=n>houseType</span><span class=o>.</span><span class=na>buildHouse</span><span class=o>();</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>
</span></span><span class=line><span class=ln>14</span><span class=cl><span class=kd>class</span> <span class=nc>GlassHouse</span> <span class=kd>extends</span> <span class=n>HouseTemplate</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>
</span></span><span class=line><span class=ln>16</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>buildWalls</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Building Glass Walls&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>
</span></span><span class=line><span class=ln>21</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>buildPillars</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Building Pillars with glass coating&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>25</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>
</span></span><span class=line><span class=ln>27</span><span class=cl><span class=kd>class</span> <span class=nc>WoodenHouse</span> <span class=kd>extends</span> <span class=n>HouseTemplate</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>
</span></span><span class=line><span class=ln>29</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>buildWalls</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Building Wooden Walls&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>
</span></span><span class=line><span class=ln>34</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>buildPillars</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Building Pillars with Wood coating&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>
</span></span><span class=line><span class=ln>39</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>40</span><span class=cl>
</span></span><span class=line><span class=ln>41</span><span class=cl>
</span></span><span class=line><span class=ln>42</span><span class=cl><span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>HouseTemplate</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>43</span><span class=cl>
</span></span><span class=line><span class=ln>44</span><span class=cl>    <span class=c1>//template method, final so subclasses can&#39;t override
</span></span></span><span class=line><span class=ln>45</span><span class=cl><span class=c1></span>    <span class=kd>public</span> <span class=kd>final</span> <span class=kt>void</span> <span class=nf>buildHouse</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>46</span><span class=cl>        <span class=n>buildFoundation</span><span class=o>();</span>
</span></span><span class=line><span class=ln>47</span><span class=cl>        <span class=n>buildPillars</span><span class=o>();</span>
</span></span><span class=line><span class=ln>48</span><span class=cl>        <span class=n>buildWalls</span><span class=o>();</span>
</span></span><span class=line><span class=ln>49</span><span class=cl>        <span class=n>buildWindows</span><span class=o>();</span>
</span></span><span class=line><span class=ln>50</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;House is built.&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>51</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>52</span><span class=cl>
</span></span><span class=line><span class=ln>53</span><span class=cl>    <span class=c1>//default implementation
</span></span></span><span class=line><span class=ln>54</span><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=kt>void</span> <span class=nf>buildWindows</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>55</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Building Glass Windows&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>56</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>57</span><span class=cl>
</span></span><span class=line><span class=ln>58</span><span class=cl>    <span class=c1>//methods to be implemented by subclasses
</span></span></span><span class=line><span class=ln>59</span><span class=cl><span class=c1></span>    <span class=kd>public</span> <span class=kd>abstract</span> <span class=kt>void</span> <span class=nf>buildWalls</span><span class=o>();</span>
</span></span><span class=line><span class=ln>60</span><span class=cl>
</span></span><span class=line><span class=ln>61</span><span class=cl>    <span class=kd>public</span> <span class=kd>abstract</span> <span class=kt>void</span> <span class=nf>buildPillars</span><span class=o>();</span>
</span></span><span class=line><span class=ln>62</span><span class=cl>
</span></span><span class=line><span class=ln>63</span><span class=cl>    <span class=kd>private</span> <span class=kt>void</span> <span class=nf>buildFoundation</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>64</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Building foundation with cement,iron rodsand sand&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>65</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>66</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln> 1</span><span class=cl>Building foundation with cement,iron rodsand sand
</span></span><span class=line><span class=ln> 2</span><span class=cl>Building Pillars with Wood coating
</span></span><span class=line><span class=ln> 3</span><span class=cl>Building Wooden Walls
</span></span><span class=line><span class=ln> 4</span><span class=cl>Building Glass Windows
</span></span><span class=line><span class=ln> 5</span><span class=cl>House is built.
</span></span><span class=line><span class=ln> 6</span><span class=cl>-------------------------
</span></span><span class=line><span class=ln> 7</span><span class=cl>Building foundation with cement,iron rodsand sand
</span></span><span class=line><span class=ln> 8</span><span class=cl>Building Pillars with glass coating
</span></span><span class=line><span class=ln> 9</span><span class=cl>Building Glass Walls
</span></span><span class=line><span class=ln>10</span><span class=cl>Building Glass Windows
</span></span><span class=line><span class=ln>11</span><span class=cl>House is built.
</span></span></code></pre></div><h3 id=2-mediator-pattern>2. Mediator Pattern</h3><p>Mediator pattern is used to provide a centralized communication medium between different objects.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.mediator</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.ArrayList</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.List</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.AllArgsConstructor</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=kd>interface</span> <span class=nc>ChatMediator</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>sendMessage</span><span class=o>(</span><span class=n>String</span> <span class=n>msg</span><span class=o>,</span> <span class=n>User</span> <span class=n>user</span><span class=o>);</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=kt>void</span> <span class=nf>addUser</span><span class=o>(</span><span class=n>User</span> <span class=n>user</span><span class=o>);</span>
</span></span><span class=line><span class=ln>13</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>
</span></span><span class=line><span class=ln>15</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>        <span class=n>ChatMediator</span> <span class=n>mediator</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ChatMediatorImpl</span><span class=o>();</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>        <span class=n>User</span> <span class=n>user1</span> <span class=o>=</span> <span class=k>new</span> <span class=n>User</span><span class=o>(</span><span class=n>mediator</span><span class=o>,</span> <span class=s>&#34;Raj&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>        <span class=n>User</span> <span class=n>user2</span> <span class=o>=</span> <span class=k>new</span> <span class=n>User</span><span class=o>(</span><span class=n>mediator</span><span class=o>,</span> <span class=s>&#34;Jacob&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>        <span class=n>User</span> <span class=n>user3</span> <span class=o>=</span> <span class=k>new</span> <span class=n>User</span><span class=o>(</span><span class=n>mediator</span><span class=o>,</span> <span class=s>&#34;Henry&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>        <span class=n>User</span> <span class=n>user4</span> <span class=o>=</span> <span class=k>new</span> <span class=n>User</span><span class=o>(</span><span class=n>mediator</span><span class=o>,</span> <span class=s>&#34;Stan&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>        <span class=n>mediator</span><span class=o>.</span><span class=na>addUser</span><span class=o>(</span><span class=n>user1</span><span class=o>);</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>        <span class=n>mediator</span><span class=o>.</span><span class=na>addUser</span><span class=o>(</span><span class=n>user2</span><span class=o>);</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>        <span class=n>mediator</span><span class=o>.</span><span class=na>addUser</span><span class=o>(</span><span class=n>user3</span><span class=o>);</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>        <span class=n>mediator</span><span class=o>.</span><span class=na>addUser</span><span class=o>(</span><span class=n>user4</span><span class=o>);</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>        <span class=n>user1</span><span class=o>.</span><span class=na>send</span><span class=o>(</span><span class=s>&#34;Hi All&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>
</span></span><span class=line><span class=ln>29</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>30</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>
</span></span><span class=line><span class=ln>32</span><span class=cl><span class=kd>class</span> <span class=nc>ChatMediatorImpl</span> <span class=kd>implements</span> <span class=n>ChatMediator</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>
</span></span><span class=line><span class=ln>34</span><span class=cl>    <span class=kd>private</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>User</span><span class=o>&gt;</span> <span class=n>users</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>
</span></span><span class=line><span class=ln>36</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>addUser</span><span class=o>(</span><span class=n>User</span> <span class=n>user</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>users</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>user</span><span class=o>);</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>40</span><span class=cl>
</span></span><span class=line><span class=ln>41</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>42</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>sendMessage</span><span class=o>(</span><span class=n>String</span> <span class=n>msg</span><span class=o>,</span> <span class=n>User</span> <span class=n>user</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>43</span><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=n>User</span> <span class=n>u</span> <span class=o>:</span> <span class=k>this</span><span class=o>.</span><span class=na>users</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>44</span><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>u</span> <span class=o>!=</span> <span class=n>user</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>45</span><span class=cl>                <span class=n>u</span><span class=o>.</span><span class=na>receive</span><span class=o>(</span><span class=n>msg</span><span class=o>);</span>
</span></span><span class=line><span class=ln>46</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>47</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>48</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>49</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>50</span><span class=cl>
</span></span><span class=line><span class=ln>51</span><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=ln>52</span><span class=cl><span class=kd>class</span> <span class=nc>User</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>53</span><span class=cl>
</span></span><span class=line><span class=ln>54</span><span class=cl>    <span class=kd>private</span> <span class=n>ChatMediator</span> <span class=n>mediator</span><span class=o>;</span>
</span></span><span class=line><span class=ln>55</span><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=ln>56</span><span class=cl>
</span></span><span class=line><span class=ln>57</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>send</span><span class=o>(</span><span class=n>String</span> <span class=n>msg</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>58</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=k>this</span><span class=o>.</span><span class=na>name</span> <span class=o>+</span> <span class=s>&#34;: Sending Message=&#34;</span> <span class=o>+</span> <span class=n>msg</span><span class=o>);</span>
</span></span><span class=line><span class=ln>59</span><span class=cl>        <span class=n>mediator</span><span class=o>.</span><span class=na>sendMessage</span><span class=o>(</span><span class=n>msg</span><span class=o>,</span> <span class=k>this</span><span class=o>);</span>
</span></span><span class=line><span class=ln>60</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>61</span><span class=cl>
</span></span><span class=line><span class=ln>62</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>receive</span><span class=o>(</span><span class=n>String</span> <span class=n>msg</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>63</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=k>this</span><span class=o>.</span><span class=na>name</span> <span class=o>+</span> <span class=s>&#34;: Received Message:&#34;</span> <span class=o>+</span> <span class=n>msg</span><span class=o>);</span>
</span></span><span class=line><span class=ln>64</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>65</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>Raj: Sending <span class=nv>Message</span><span class=o>=</span>Hi All
</span></span><span class=line><span class=ln>2</span><span class=cl>Jacob: Received Message:Hi All
</span></span><span class=line><span class=ln>3</span><span class=cl>Henry: Received Message:Hi All
</span></span><span class=line><span class=ln>4</span><span class=cl>Stan: Received Message:Hi All
</span></span></code></pre></div><h3 id=3-chain-of-responsibility-pattern>3. Chain of Responsibility Pattern</h3><p>Chain of responsibility pattern is used when a request from client is passed to a chain of objects to process them.</p><p><figure><picture><img loading=lazy decoding=async alt class="image_figure image_internal image_processed" width=808 height=180 src=/post/design-patterns/chainofresponsibility-pattern-visual.png></picture></figure></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln>  1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.chainofresponsibility</span><span class=o>;</span>
</span></span><span class=line><span class=ln>  2</span><span class=cl>
</span></span><span class=line><span class=ln>  3</span><span class=cl><span class=kd>interface</span> <span class=nc>DispenseChain</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>  4</span><span class=cl>
</span></span><span class=line><span class=ln>  5</span><span class=cl>    <span class=kt>void</span> <span class=nf>setNextChain</span><span class=o>(</span><span class=n>DispenseChain</span> <span class=n>nextChain</span><span class=o>);</span>
</span></span><span class=line><span class=ln>  6</span><span class=cl>
</span></span><span class=line><span class=ln>  7</span><span class=cl>    <span class=kt>void</span> <span class=nf>dispense</span><span class=o>(</span><span class=kt>int</span> <span class=n>amount</span><span class=o>);</span>
</span></span><span class=line><span class=ln>  8</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>  9</span><span class=cl>
</span></span><span class=line><span class=ln> 10</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 11</span><span class=cl>
</span></span><span class=line><span class=ln> 12</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 13</span><span class=cl>        <span class=n>ATMDispenseChain</span> <span class=n>atmDispenser</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ATMDispenseChain</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 14</span><span class=cl>        <span class=kt>int</span> <span class=n>amount</span> <span class=o>=</span> <span class=n>530</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 15</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>amount</span> <span class=o>%</span> <span class=n>10</span> <span class=o>!=</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 16</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Amount should be in multiple of10s.&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 17</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 18</span><span class=cl>            <span class=n>atmDispenser</span><span class=o>.</span><span class=na>c1</span><span class=o>.</span><span class=na>dispense</span><span class=o>(</span><span class=n>amount</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 19</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln> 20</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln> 21</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln> 22</span><span class=cl>
</span></span><span class=line><span class=ln> 23</span><span class=cl><span class=kd>class</span> <span class=nc>ATMDispenseChain</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 24</span><span class=cl>
</span></span><span class=line><span class=ln> 25</span><span class=cl>    <span class=kd>public</span> <span class=n>DispenseChain</span> <span class=n>c1</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 26</span><span class=cl>
</span></span><span class=line><span class=ln> 27</span><span class=cl>    <span class=kd>public</span> <span class=nf>ATMDispenseChain</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 28</span><span class=cl>
</span></span><span class=line><span class=ln> 29</span><span class=cl>        <span class=n>DispenseChain</span> <span class=n>c1</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Dollar50Dispenser</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 30</span><span class=cl>        <span class=n>DispenseChain</span> <span class=n>c2</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Dollar20Dispenser</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 31</span><span class=cl>        <span class=n>DispenseChain</span> <span class=n>c3</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Dollar10Dispenser</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 32</span><span class=cl>
</span></span><span class=line><span class=ln> 33</span><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>c1</span> <span class=o>=</span> <span class=n>c1</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 34</span><span class=cl>        <span class=n>c1</span><span class=o>.</span><span class=na>setNextChain</span><span class=o>(</span><span class=n>c2</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 35</span><span class=cl>        <span class=n>c2</span><span class=o>.</span><span class=na>setNextChain</span><span class=o>(</span><span class=n>c3</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 36</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln> 37</span><span class=cl>
</span></span><span class=line><span class=ln> 38</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln> 39</span><span class=cl>
</span></span><span class=line><span class=ln> 40</span><span class=cl>
</span></span><span class=line><span class=ln> 41</span><span class=cl><span class=kd>class</span> <span class=nc>Dollar10Dispenser</span> <span class=kd>implements</span> <span class=n>DispenseChain</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 42</span><span class=cl>
</span></span><span class=line><span class=ln> 43</span><span class=cl>    <span class=kd>private</span> <span class=n>DispenseChain</span> <span class=n>chain</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 44</span><span class=cl>
</span></span><span class=line><span class=ln> 45</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln> 46</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setNextChain</span><span class=o>(</span><span class=n>DispenseChain</span> <span class=n>nextChain</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 47</span><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>chain</span> <span class=o>=</span> <span class=n>nextChain</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 48</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln> 49</span><span class=cl>
</span></span><span class=line><span class=ln> 50</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln> 51</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>dispense</span><span class=o>(</span><span class=kt>int</span> <span class=n>amount</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 52</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>amount</span> <span class=o>&gt;=</span> <span class=n>10</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 53</span><span class=cl>            <span class=kt>int</span> <span class=n>num</span> <span class=o>=</span> <span class=n>amount</span> <span class=o>/</span> <span class=n>10</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 54</span><span class=cl>            <span class=kt>int</span> <span class=n>remainder</span> <span class=o>=</span> <span class=n>amount</span> <span class=o>%</span> <span class=n>10</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 55</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Dispensing &#34;</span> <span class=o>+</span> <span class=n>num</span> <span class=o>+</span> <span class=s>&#34; 10$ note&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 56</span><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>remainder</span> <span class=o>!=</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 57</span><span class=cl>                <span class=k>this</span><span class=o>.</span><span class=na>chain</span><span class=o>.</span><span class=na>dispense</span><span class=o>(</span><span class=n>remainder</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 58</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln> 59</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 60</span><span class=cl>            <span class=k>this</span><span class=o>.</span><span class=na>chain</span><span class=o>.</span><span class=na>dispense</span><span class=o>(</span><span class=n>amount</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 61</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln> 62</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln> 63</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln> 64</span><span class=cl>
</span></span><span class=line><span class=ln> 65</span><span class=cl><span class=kd>class</span> <span class=nc>Dollar20Dispenser</span> <span class=kd>implements</span> <span class=n>DispenseChain</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 66</span><span class=cl>
</span></span><span class=line><span class=ln> 67</span><span class=cl>    <span class=kd>private</span> <span class=n>DispenseChain</span> <span class=n>chain</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 68</span><span class=cl>
</span></span><span class=line><span class=ln> 69</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln> 70</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setNextChain</span><span class=o>(</span><span class=n>DispenseChain</span> <span class=n>nextChain</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 71</span><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>chain</span> <span class=o>=</span> <span class=n>nextChain</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 72</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln> 73</span><span class=cl>
</span></span><span class=line><span class=ln> 74</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln> 75</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>dispense</span><span class=o>(</span><span class=kt>int</span> <span class=n>amount</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 76</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>amount</span> <span class=o>&gt;=</span> <span class=n>20</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 77</span><span class=cl>            <span class=kt>int</span> <span class=n>num</span> <span class=o>=</span> <span class=n>amount</span> <span class=o>/</span> <span class=n>20</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 78</span><span class=cl>            <span class=kt>int</span> <span class=n>remainder</span> <span class=o>=</span> <span class=n>amount</span> <span class=o>%</span> <span class=n>20</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 79</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Dispensing &#34;</span> <span class=o>+</span> <span class=n>num</span> <span class=o>+</span> <span class=s>&#34; 20$ note&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 80</span><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>remainder</span> <span class=o>!=</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 81</span><span class=cl>                <span class=k>this</span><span class=o>.</span><span class=na>chain</span><span class=o>.</span><span class=na>dispense</span><span class=o>(</span><span class=n>remainder</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 82</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln> 83</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 84</span><span class=cl>            <span class=k>this</span><span class=o>.</span><span class=na>chain</span><span class=o>.</span><span class=na>dispense</span><span class=o>(</span><span class=n>amount</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 85</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln> 86</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln> 87</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln> 88</span><span class=cl>
</span></span><span class=line><span class=ln> 89</span><span class=cl><span class=kd>class</span> <span class=nc>Dollar50Dispenser</span> <span class=kd>implements</span> <span class=n>DispenseChain</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 90</span><span class=cl>
</span></span><span class=line><span class=ln> 91</span><span class=cl>    <span class=kd>private</span> <span class=n>DispenseChain</span> <span class=n>chain</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 92</span><span class=cl>
</span></span><span class=line><span class=ln> 93</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln> 94</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setNextChain</span><span class=o>(</span><span class=n>DispenseChain</span> <span class=n>nextChain</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 95</span><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>chain</span> <span class=o>=</span> <span class=n>nextChain</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 96</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln> 97</span><span class=cl>
</span></span><span class=line><span class=ln> 98</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln> 99</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>dispense</span><span class=o>(</span><span class=kt>int</span> <span class=n>amount</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>100</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>amount</span> <span class=o>&gt;=</span> <span class=n>50</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>101</span><span class=cl>            <span class=kt>int</span> <span class=n>num</span> <span class=o>=</span> <span class=n>amount</span> <span class=o>/</span> <span class=n>50</span><span class=o>;</span>
</span></span><span class=line><span class=ln>102</span><span class=cl>            <span class=kt>int</span> <span class=n>remainder</span> <span class=o>=</span> <span class=n>amount</span> <span class=o>%</span> <span class=n>50</span><span class=o>;</span>
</span></span><span class=line><span class=ln>103</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Dispensing &#34;</span> <span class=o>+</span> <span class=n>num</span> <span class=o>+</span> <span class=s>&#34; 50$ note&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>104</span><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>remainder</span> <span class=o>!=</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>105</span><span class=cl>                <span class=k>this</span><span class=o>.</span><span class=na>chain</span><span class=o>.</span><span class=na>dispense</span><span class=o>(</span><span class=n>remainder</span><span class=o>);</span>
</span></span><span class=line><span class=ln>106</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>107</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>108</span><span class=cl>            <span class=k>this</span><span class=o>.</span><span class=na>chain</span><span class=o>.</span><span class=na>dispense</span><span class=o>(</span><span class=n>amount</span><span class=o>);</span>
</span></span><span class=line><span class=ln>109</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>110</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>111</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>Dispensing <span class=m>10</span> 50$ note
</span></span><span class=line><span class=ln>2</span><span class=cl>Dispensing <span class=m>1</span> 20$ note
</span></span><span class=line><span class=ln>3</span><span class=cl>Dispensing <span class=m>1</span> 10$ note
</span></span></code></pre></div><h3 id=4-observer-pattern>4. Observer Pattern</h3><p>Observer design pattern is used when we want to get notified about state changes of a object. An Observer watches the Subject here and any changes on Subject are notified to the Observer.</p><p><figure><picture><img loading=lazy decoding=async alt class="image_figure image_internal image_processed" width=473 height=404 src=/post/design-patterns/observer-pattern-visual.png></picture></figure></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.observer</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.ArrayList</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.List</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=kd>interface</span> <span class=nc>Observer</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>notify</span><span class=o>(</span><span class=n>String</span> <span class=n>tick</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=kd>interface</span> <span class=nc>Subject</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>registerObserver</span><span class=o>(</span><span class=n>Observer</span> <span class=n>observer</span><span class=o>);</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>notifyObservers</span><span class=o>(</span><span class=n>String</span> <span class=n>tick</span><span class=o>);</span>
</span></span><span class=line><span class=ln>14</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>
</span></span><span class=line><span class=ln>16</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>
</span></span><span class=line><span class=ln>18</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>        <span class=n>Feed</span> <span class=n>feed</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Feed</span><span class=o>();</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>        <span class=n>feed</span><span class=o>.</span><span class=na>registerObserver</span><span class=o>(</span><span class=k>new</span> <span class=n>AppleStockObserver</span><span class=o>());</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>        <span class=n>feed</span><span class=o>.</span><span class=na>registerObserver</span><span class=o>(</span><span class=k>new</span> <span class=n>GoogleStockObserver</span><span class=o>());</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>        <span class=n>feed</span><span class=o>.</span><span class=na>notifyObservers</span><span class=o>(</span><span class=s>&#34;APPL: 162.33&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>        <span class=n>feed</span><span class=o>.</span><span class=na>notifyObservers</span><span class=o>(</span><span class=s>&#34;GOOGL: 1031.22&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>25</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>
</span></span><span class=line><span class=ln>27</span><span class=cl><span class=kd>class</span> <span class=nc>AppleStockObserver</span> <span class=kd>implements</span> <span class=n>Observer</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>notify</span><span class=o>(</span><span class=n>String</span> <span class=n>tick</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>tick</span> <span class=o>!=</span> <span class=kc>null</span> <span class=o>&amp;&amp;</span> <span class=n>tick</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s>&#34;APPL&#34;</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Apple Stock Price: &#34;</span> <span class=o>+</span> <span class=n>tick</span><span class=o>);</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>34</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>
</span></span><span class=line><span class=ln>36</span><span class=cl><span class=kd>class</span> <span class=nc>GoogleStockObserver</span> <span class=kd>implements</span> <span class=n>Observer</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>notify</span><span class=o>(</span><span class=n>String</span> <span class=n>tick</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>tick</span> <span class=o>!=</span> <span class=kc>null</span> <span class=o>&amp;&amp;</span> <span class=n>tick</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s>&#34;GOOGL&#34;</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>40</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Google Stock Price: &#34;</span> <span class=o>+</span> <span class=n>tick</span><span class=o>);</span>
</span></span><span class=line><span class=ln>41</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>42</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>43</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>44</span><span class=cl>
</span></span><span class=line><span class=ln>45</span><span class=cl><span class=kd>class</span> <span class=nc>Feed</span> <span class=kd>implements</span> <span class=n>Subject</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>46</span><span class=cl>    <span class=n>List</span><span class=o>&lt;</span><span class=n>Observer</span><span class=o>&gt;</span> <span class=n>observerLst</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=ln>47</span><span class=cl>
</span></span><span class=line><span class=ln>48</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>49</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>registerObserver</span><span class=o>(</span><span class=n>Observer</span> <span class=n>observer</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>50</span><span class=cl>        <span class=n>observerLst</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>observer</span><span class=o>);</span>
</span></span><span class=line><span class=ln>51</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>52</span><span class=cl>
</span></span><span class=line><span class=ln>53</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>54</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>notifyObservers</span><span class=o>(</span><span class=n>String</span> <span class=n>tick</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>55</span><span class=cl>        <span class=n>observerLst</span><span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>e</span> <span class=o>-&gt;</span> <span class=n>e</span><span class=o>.</span><span class=na>notify</span><span class=o>(</span><span class=n>tick</span><span class=o>));</span>
</span></span><span class=line><span class=ln>56</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>57</span><span class=cl><span class=o>}</span></span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>Apple Stock Price: APPL: 162.33
</span></span><span class=line><span class=ln>2</span><span class=cl>Google Stock Price: GOOGL: 1031.22
</span></span></code></pre></div><h3 id=5-strategy-pattern>5. Strategy Pattern</h3><p>Strategy pattern is used when we have multiple algorithm for a specific task and client decides the actual implementation to be used at runtime. This is also known as Policy Pattern.</p><p><figure><picture><img loading=lazy decoding=async alt class="image_figure image_internal image_processed" width=388 height=300 src=/post/design-patterns/strategy-pattern-visual.png></picture></figure></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.stategy</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kd>interface</span> <span class=nc>PaymentStrategy</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=kt>void</span> <span class=nf>pay</span><span class=o>(</span><span class=kt>int</span> <span class=n>amount</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>        <span class=k>new</span> <span class=n>ShoppingCart</span><span class=o>().</span><span class=na>pay</span><span class=o>(</span><span class=k>new</span> <span class=n>CreditCardStrategy</span><span class=o>(),</span> <span class=n>10</span><span class=o>);</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>        <span class=k>new</span> <span class=n>ShoppingCart</span><span class=o>().</span><span class=na>pay</span><span class=o>(</span><span class=k>new</span> <span class=n>PaypalStrategy</span><span class=o>(),</span> <span class=n>10</span><span class=o>);</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>14</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>
</span></span><span class=line><span class=ln>16</span><span class=cl><span class=kd>class</span> <span class=nc>CreditCardStrategy</span> <span class=kd>implements</span> <span class=n>PaymentStrategy</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>
</span></span><span class=line><span class=ln>18</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>pay</span><span class=o>(</span><span class=kt>int</span> <span class=n>amount</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Paid by credit card: &#34;</span> <span class=o>+</span> <span class=n>amount</span><span class=o>);</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>
</span></span><span class=line><span class=ln>23</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>
</span></span><span class=line><span class=ln>25</span><span class=cl><span class=kd>class</span> <span class=nc>PaypalStrategy</span> <span class=kd>implements</span> <span class=n>PaymentStrategy</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>
</span></span><span class=line><span class=ln>27</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>pay</span><span class=o>(</span><span class=kt>int</span> <span class=n>amount</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Paid by paypal: &#34;</span> <span class=o>+</span> <span class=n>amount</span><span class=o>);</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>
</span></span><span class=line><span class=ln>32</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>
</span></span><span class=line><span class=ln>34</span><span class=cl><span class=kd>class</span> <span class=nc>ShoppingCart</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>
</span></span><span class=line><span class=ln>36</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>pay</span><span class=o>(</span><span class=n>PaymentStrategy</span> <span class=n>paymentMethod</span><span class=o>,</span> <span class=n>Integer</span> <span class=n>amount</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>        <span class=n>paymentMethod</span><span class=o>.</span><span class=na>pay</span><span class=o>(</span><span class=n>amount</span><span class=o>);</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>39</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>Paid by creditcard: <span class=m>10</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>Paid by paypall: <span class=m>10</span>
</span></span></code></pre></div><h3 id=6-command-pattern>6. Command Pattern</h3><p>Command pattern is used when request is wrapped and passed to invoker which then inturn invokes the encapsulated command. Here Command is our command interface, Stock class is our request. BuyStock and SellStock implementing Order interface which does the actual command processing.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.command</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.ArrayList</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.List</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.AllArgsConstructor</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=kd>interface</span> <span class=nc>Command</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=kt>void</span> <span class=nf>execute</span><span class=o>();</span>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>
</span></span><span class=line><span class=ln>14</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>
</span></span><span class=line><span class=ln>16</span><span class=cl>        <span class=n>Stock</span> <span class=n>stock1</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Stock</span><span class=o>(</span><span class=s>&#34;GOOGL&#34;</span><span class=o>,</span> <span class=n>10</span><span class=o>);</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>        <span class=n>Stock</span> <span class=n>stock2</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Stock</span><span class=o>(</span><span class=s>&#34;IBM&#34;</span><span class=o>,</span> <span class=n>20</span><span class=o>);</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>
</span></span><span class=line><span class=ln>19</span><span class=cl>        <span class=n>BuyStock</span> <span class=n>buyStockCmd</span> <span class=o>=</span> <span class=k>new</span> <span class=n>BuyStock</span><span class=o>(</span><span class=n>stock1</span><span class=o>);</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>        <span class=n>SellStock</span> <span class=n>sellStockCmd</span> <span class=o>=</span> <span class=k>new</span> <span class=n>SellStock</span><span class=o>(</span><span class=n>stock2</span><span class=o>);</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>
</span></span><span class=line><span class=ln>22</span><span class=cl>        <span class=n>Broker</span> <span class=n>broker</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Broker</span><span class=o>();</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>        <span class=n>broker</span><span class=o>.</span><span class=na>takeOrder</span><span class=o>(</span><span class=n>buyStockCmd</span><span class=o>);</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>        <span class=n>broker</span><span class=o>.</span><span class=na>takeOrder</span><span class=o>(</span><span class=n>sellStockCmd</span><span class=o>);</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>
</span></span><span class=line><span class=ln>26</span><span class=cl>        <span class=n>broker</span><span class=o>.</span><span class=na>placeOrders</span><span class=o>();</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>
</span></span><span class=line><span class=ln>28</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>29</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>
</span></span><span class=line><span class=ln>31</span><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=ln>32</span><span class=cl><span class=kd>class</span> <span class=nc>Stock</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>
</span></span><span class=line><span class=ln>34</span><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>    <span class=kd>private</span> <span class=kt>int</span> <span class=n>quantity</span><span class=o>;</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>
</span></span><span class=line><span class=ln>37</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>buy</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Stock [ Name: &#34;</span> <span class=o>+</span> <span class=n>name</span> <span class=o>+</span> <span class=s>&#34;, Quantity: &#34;</span> <span class=o>+</span> <span class=n>quantity</span> <span class=o>+</span> <span class=s>&#34; ] bought&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>40</span><span class=cl>
</span></span><span class=line><span class=ln>41</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>sell</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>42</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Stock [ Name: &#34;</span> <span class=o>+</span> <span class=n>name</span> <span class=o>+</span> <span class=s>&#34;, Quantity: &#34;</span> <span class=o>+</span> <span class=n>quantity</span> <span class=o>+</span> <span class=s>&#34; ] sold&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>43</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>44</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>45</span><span class=cl>
</span></span><span class=line><span class=ln>46</span><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=ln>47</span><span class=cl><span class=kd>class</span> <span class=nc>BuyStock</span> <span class=kd>implements</span> <span class=n>Command</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>48</span><span class=cl>    <span class=kd>private</span> <span class=n>Stock</span> <span class=n>stock</span><span class=o>;</span>
</span></span><span class=line><span class=ln>49</span><span class=cl>
</span></span><span class=line><span class=ln>50</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>execute</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>51</span><span class=cl>        <span class=n>stock</span><span class=o>.</span><span class=na>buy</span><span class=o>();</span>
</span></span><span class=line><span class=ln>52</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>53</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>54</span><span class=cl>
</span></span><span class=line><span class=ln>55</span><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=ln>56</span><span class=cl><span class=kd>class</span> <span class=nc>SellStock</span> <span class=kd>implements</span> <span class=n>Command</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>57</span><span class=cl>    <span class=kd>private</span> <span class=n>Stock</span> <span class=n>stock</span><span class=o>;</span>
</span></span><span class=line><span class=ln>58</span><span class=cl>
</span></span><span class=line><span class=ln>59</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>execute</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>60</span><span class=cl>        <span class=n>stock</span><span class=o>.</span><span class=na>sell</span><span class=o>();</span>
</span></span><span class=line><span class=ln>61</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>62</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>63</span><span class=cl>
</span></span><span class=line><span class=ln>64</span><span class=cl><span class=kd>class</span> <span class=nc>Broker</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>65</span><span class=cl>    <span class=kd>private</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Command</span><span class=o>&gt;</span> <span class=n>cmdLst</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>Command</span><span class=o>&gt;();</span>
</span></span><span class=line><span class=ln>66</span><span class=cl>
</span></span><span class=line><span class=ln>67</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>takeOrder</span><span class=o>(</span><span class=n>Command</span> <span class=n>cmd</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>68</span><span class=cl>        <span class=n>cmdLst</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>cmd</span><span class=o>);</span>
</span></span><span class=line><span class=ln>69</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>70</span><span class=cl>
</span></span><span class=line><span class=ln>71</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>placeOrders</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>72</span><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=n>Command</span> <span class=n>cmd</span> <span class=o>:</span> <span class=n>cmdLst</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>73</span><span class=cl>            <span class=n>cmd</span><span class=o>.</span><span class=na>execute</span><span class=o>();</span>
</span></span><span class=line><span class=ln>74</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>75</span><span class=cl>        <span class=n>cmdLst</span><span class=o>.</span><span class=na>clear</span><span class=o>();</span>
</span></span><span class=line><span class=ln>76</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>77</span><span class=cl><span class=o>}</span></span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>Stock <span class=o>[</span> Name: GOOGL, Quantity: <span class=m>10</span> <span class=o>]</span> bought
</span></span><span class=line><span class=ln>2</span><span class=cl>Stock <span class=o>[</span> Name: IBM, Quantity: <span class=m>20</span> <span class=o>]</span> sold
</span></span></code></pre></div><h3 id=7-state-pattern>7. State Pattern</h3><p>State pattern is used when object changes its behaviour based on internal state. You avoid writing the conditional if-else logic to determine the type of action to be taken based on state of object. Notice that GameContext also implements State along with StartState,StopState classes.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.state</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.AllArgsConstructor</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.Data</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.NoArgsConstructor</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=kd>interface</span> <span class=nc>State</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>doAction</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>        <span class=n>GameContext</span> <span class=n>game</span> <span class=o>=</span> <span class=k>new</span> <span class=n>GameContext</span><span class=o>();</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>
</span></span><span class=line><span class=ln>15</span><span class=cl>        <span class=n>StartState</span> <span class=n>startState</span> <span class=o>=</span> <span class=k>new</span> <span class=n>StartState</span><span class=o>();</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>        <span class=n>StopState</span> <span class=n>stopState</span> <span class=o>=</span> <span class=k>new</span> <span class=n>StopState</span><span class=o>();</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>
</span></span><span class=line><span class=ln>18</span><span class=cl>        <span class=n>game</span><span class=o>.</span><span class=na>setState</span><span class=o>(</span><span class=n>startState</span><span class=o>);</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>        <span class=n>game</span><span class=o>.</span><span class=na>doAction</span><span class=o>();</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>
</span></span><span class=line><span class=ln>21</span><span class=cl>        <span class=n>game</span><span class=o>.</span><span class=na>setState</span><span class=o>(</span><span class=n>stopState</span><span class=o>);</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>        <span class=n>game</span><span class=o>.</span><span class=na>doAction</span><span class=o>();</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>
</span></span><span class=line><span class=ln>25</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>
</span></span><span class=line><span class=ln>27</span><span class=cl><span class=kd>class</span> <span class=nc>StartState</span> <span class=kd>implements</span> <span class=n>State</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>
</span></span><span class=line><span class=ln>29</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>doAction</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Roll the dice!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>32</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>
</span></span><span class=line><span class=ln>34</span><span class=cl><span class=kd>class</span> <span class=nc>StopState</span> <span class=kd>implements</span> <span class=n>State</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>
</span></span><span class=line><span class=ln>36</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>doAction</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Game Over!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>39</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>40</span><span class=cl>
</span></span><span class=line><span class=ln>41</span><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=ln>42</span><span class=cl><span class=nd>@NoArgsConstructor</span>
</span></span><span class=line><span class=ln>43</span><span class=cl><span class=nd>@Data</span>
</span></span><span class=line><span class=ln>44</span><span class=cl><span class=kd>class</span> <span class=nc>GameContext</span> <span class=kd>implements</span> <span class=n>State</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>45</span><span class=cl>    <span class=kd>private</span> <span class=n>State</span> <span class=n>state</span><span class=o>;</span>
</span></span><span class=line><span class=ln>46</span><span class=cl>
</span></span><span class=line><span class=ln>47</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>48</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>doAction</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>49</span><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>state</span><span class=o>.</span><span class=na>doAction</span><span class=o>();</span>
</span></span><span class=line><span class=ln>50</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>51</span><span class=cl><span class=o>}</span></span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>Roll the dice!
</span></span><span class=line><span class=ln>2</span><span class=cl>Game Over!
</span></span></code></pre></div><h3 id=8-visitor-pattern>8. Visitor Pattern</h3><p>Visitor pattern is used to add methods to different types of classes without altering those classes. Here we have moved the tax calculation outside each item.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.visitor</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.AllArgsConstructor</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.Data</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=kd>interface</span> <span class=nc>Visitable</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=kd>public</span> <span class=kt>double</span> <span class=nf>accept</span><span class=o>(</span><span class=n>Visitor</span> <span class=n>visitor</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=kd>interface</span> <span class=nc>Visitor</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=kd>public</span> <span class=kt>double</span> <span class=nf>visit</span><span class=o>(</span><span class=n>Liquor</span> <span class=n>item</span><span class=o>);</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=kd>public</span> <span class=kt>double</span> <span class=nf>visit</span><span class=o>(</span><span class=n>Grocery</span> <span class=n>item</span><span class=o>);</span>
</span></span><span class=line><span class=ln>14</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>
</span></span><span class=line><span class=ln>16</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>
</span></span><span class=line><span class=ln>19</span><span class=cl>        <span class=n>Visitor</span> <span class=n>taxCalculator</span> <span class=o>=</span> <span class=k>new</span> <span class=n>TaxVisitor</span><span class=o>();</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>        <span class=n>Liquor</span> <span class=n>liquor</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Liquor</span><span class=o>(</span><span class=s>&#34;Black Dog&#34;</span><span class=o>,</span> <span class=n>12</span><span class=o>.</span><span class=na>00d</span><span class=o>);</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Price of liquor: &#34;</span> <span class=o>+</span> <span class=n>liquor</span><span class=o>.</span><span class=na>accept</span><span class=o>(</span><span class=n>taxCalculator</span><span class=o>));</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>
</span></span><span class=line><span class=ln>23</span><span class=cl>        <span class=n>Grocery</span> <span class=n>grocery</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Grocery</span><span class=o>(</span><span class=s>&#34;Potato Chips&#34;</span><span class=o>,</span> <span class=n>12</span><span class=o>.</span><span class=na>00d</span><span class=o>);</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Price of grocery: &#34;</span> <span class=o>+</span> <span class=n>grocery</span><span class=o>.</span><span class=na>accept</span><span class=o>(</span><span class=n>taxCalculator</span><span class=o>));</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>
</span></span><span class=line><span class=ln>26</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>27</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>
</span></span><span class=line><span class=ln>29</span><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=ln>30</span><span class=cl><span class=nd>@Data</span>
</span></span><span class=line><span class=ln>31</span><span class=cl><span class=kd>class</span> <span class=nc>Liquor</span> <span class=kd>implements</span> <span class=n>Visitable</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>    <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>    <span class=kt>double</span> <span class=n>price</span><span class=o>;</span>
</span></span><span class=line><span class=ln>34</span><span class=cl>
</span></span><span class=line><span class=ln>35</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>    <span class=kd>public</span> <span class=kt>double</span> <span class=nf>accept</span><span class=o>(</span><span class=n>Visitor</span> <span class=n>visitor</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>        <span class=k>return</span> <span class=n>visitor</span><span class=o>.</span><span class=na>visit</span><span class=o>(</span><span class=k>this</span><span class=o>);</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>39</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>40</span><span class=cl>
</span></span><span class=line><span class=ln>41</span><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=ln>42</span><span class=cl><span class=nd>@Data</span>
</span></span><span class=line><span class=ln>43</span><span class=cl><span class=kd>class</span> <span class=nc>Grocery</span> <span class=kd>implements</span> <span class=n>Visitable</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>44</span><span class=cl>    <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=ln>45</span><span class=cl>    <span class=kt>double</span> <span class=n>price</span><span class=o>;</span>
</span></span><span class=line><span class=ln>46</span><span class=cl>
</span></span><span class=line><span class=ln>47</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>48</span><span class=cl>    <span class=kd>public</span> <span class=kt>double</span> <span class=nf>accept</span><span class=o>(</span><span class=n>Visitor</span> <span class=n>visitor</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>49</span><span class=cl>        <span class=k>return</span> <span class=n>visitor</span><span class=o>.</span><span class=na>visit</span><span class=o>(</span><span class=k>this</span><span class=o>);</span>
</span></span><span class=line><span class=ln>50</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>51</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>52</span><span class=cl>
</span></span><span class=line><span class=ln>53</span><span class=cl><span class=kd>class</span> <span class=nc>TaxVisitor</span> <span class=kd>implements</span> <span class=n>Visitor</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>54</span><span class=cl>
</span></span><span class=line><span class=ln>55</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>56</span><span class=cl>    <span class=kd>public</span> <span class=kt>double</span> <span class=nf>visit</span><span class=o>(</span><span class=n>Liquor</span> <span class=n>item</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>57</span><span class=cl>        <span class=k>return</span> <span class=n>item</span><span class=o>.</span><span class=na>price</span> <span class=o>*</span> <span class=o>.</span><span class=na>30</span> <span class=o>+</span> <span class=n>item</span><span class=o>.</span><span class=na>price</span><span class=o>;</span>
</span></span><span class=line><span class=ln>58</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>59</span><span class=cl>
</span></span><span class=line><span class=ln>60</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>61</span><span class=cl>    <span class=kd>public</span> <span class=kt>double</span> <span class=nf>visit</span><span class=o>(</span><span class=n>Grocery</span> <span class=n>item</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>62</span><span class=cl>        <span class=k>return</span> <span class=n>item</span><span class=o>.</span><span class=na>price</span> <span class=o>*</span> <span class=o>.</span><span class=na>10</span> <span class=o>+</span> <span class=n>item</span><span class=o>.</span><span class=na>price</span><span class=o>;</span>
</span></span><span class=line><span class=ln>63</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>64</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>Price of liquor: 15.6
</span></span><span class=line><span class=ln>2</span><span class=cl>Price of grocery: 13.2
</span></span></code></pre></div><h3 id=9-interpreter-pattern>9. Interpreter Pattern</h3><p>Interpreter pattern provides a way to evaluate language grammar or expression.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.interpreter</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.AllArgsConstructor</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.Data</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=kd>interface</span> <span class=nc>Expression</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=n>String</span> <span class=nf>interpret</span><span class=o>(</span><span class=n>InterpreterContext</span> <span class=n>ctx</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>        <span class=n>String</span> <span class=n>input</span> <span class=o>=</span> <span class=s>&#34;30 in binary&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>input</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s>&#34;binary&#34;</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>            <span class=kt>int</span> <span class=n>val</span> <span class=o>=</span> <span class=n>Integer</span><span class=o>.</span><span class=na>parseInt</span><span class=o>(</span><span class=n>input</span><span class=o>.</span><span class=na>substring</span><span class=o>(</span><span class=n>0</span><span class=o>,</span> <span class=n>input</span><span class=o>.</span><span class=na>indexOf</span><span class=o>(</span><span class=s>&#34; &#34;</span><span class=o>)));</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=k>new</span> <span class=n>IntToBinaryExpression</span><span class=o>(</span><span class=n>val</span><span class=o>).</span><span class=na>interpret</span><span class=o>(</span><span class=k>new</span> <span class=n>InterpreterContext</span><span class=o>()));</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>
</span></span><span class=line><span class=ln>18</span><span class=cl>        <span class=n>input</span> <span class=o>=</span> <span class=s>&#34;30 in hexadecimal&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>input</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s>&#34;hexadecimal&#34;</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>            <span class=kt>int</span> <span class=n>val</span> <span class=o>=</span> <span class=n>Integer</span><span class=o>.</span><span class=na>parseInt</span><span class=o>(</span><span class=n>input</span><span class=o>.</span><span class=na>substring</span><span class=o>(</span><span class=n>0</span><span class=o>,</span> <span class=n>input</span><span class=o>.</span><span class=na>indexOf</span><span class=o>(</span><span class=s>&#34; &#34;</span><span class=o>)));</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=k>new</span> <span class=n>IntToHexExpression</span><span class=o>(</span><span class=n>val</span><span class=o>).</span><span class=na>interpret</span><span class=o>(</span><span class=k>new</span> <span class=n>InterpreterContext</span><span class=o>()));</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>
</span></span><span class=line><span class=ln>25</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>
</span></span><span class=line><span class=ln>27</span><span class=cl><span class=kd>class</span> <span class=nc>InterpreterContext</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getBinaryFormat</span><span class=o>(</span><span class=kt>int</span> <span class=n>val</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>        <span class=k>return</span> <span class=n>Integer</span><span class=o>.</span><span class=na>toBinaryString</span><span class=o>(</span><span class=n>val</span><span class=o>);</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>
</span></span><span class=line><span class=ln>32</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getHexFormat</span><span class=o>(</span><span class=kt>int</span> <span class=n>val</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>        <span class=k>return</span> <span class=n>Integer</span><span class=o>.</span><span class=na>toHexString</span><span class=o>(</span><span class=n>val</span><span class=o>);</span>
</span></span><span class=line><span class=ln>34</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>35</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>
</span></span><span class=line><span class=ln>37</span><span class=cl><span class=nd>@Data</span>
</span></span><span class=line><span class=ln>38</span><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=ln>39</span><span class=cl><span class=kd>class</span> <span class=nc>IntToBinaryExpression</span> <span class=kd>implements</span> <span class=n>Expression</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>40</span><span class=cl>
</span></span><span class=line><span class=ln>41</span><span class=cl>    <span class=kt>int</span> <span class=n>val</span><span class=o>;</span>
</span></span><span class=line><span class=ln>42</span><span class=cl>
</span></span><span class=line><span class=ln>43</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>44</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>interpret</span><span class=o>(</span><span class=n>InterpreterContext</span> <span class=n>ctx</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>45</span><span class=cl>        <span class=k>return</span> <span class=n>ctx</span><span class=o>.</span><span class=na>getBinaryFormat</span><span class=o>(</span><span class=n>val</span><span class=o>);</span>
</span></span><span class=line><span class=ln>46</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>47</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>48</span><span class=cl>
</span></span><span class=line><span class=ln>49</span><span class=cl><span class=nd>@Data</span>
</span></span><span class=line><span class=ln>50</span><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=ln>51</span><span class=cl><span class=kd>class</span> <span class=nc>IntToHexExpression</span> <span class=kd>implements</span> <span class=n>Expression</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>52</span><span class=cl>
</span></span><span class=line><span class=ln>53</span><span class=cl>    <span class=kt>int</span> <span class=n>val</span><span class=o>;</span>
</span></span><span class=line><span class=ln>54</span><span class=cl>
</span></span><span class=line><span class=ln>55</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>56</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>interpret</span><span class=o>(</span><span class=n>InterpreterContext</span> <span class=n>ctx</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>57</span><span class=cl>        <span class=k>return</span> <span class=n>ctx</span><span class=o>.</span><span class=na>getHexFormat</span><span class=o>(</span><span class=n>val</span><span class=o>);</span>
</span></span><span class=line><span class=ln>58</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>59</span><span class=cl><span class=o>}</span></span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl><span class=m>11110</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>1e
</span></span></code></pre></div><h3 id=10-iterator-pattern>10. Iterator Pattern</h3><p>Iterator pattern is used to provide standard way to traverse through group of objects. In the example below we provide 2 types of iterators over the fruit collection, we could have let the user write his own iterator but if there are many clients using the iterator then it would be difficult to maintain. Notice that FruitIterator is private and inner class, this hides the implementation details from the client. Logic of iteration is internal to the collection.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.iterator</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.ArrayList</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.Collections</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.Comparator</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.Iterator</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.List</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.AllArgsConstructor</span><span class=o>;</span>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.Data</span><span class=o>;</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=kd>interface</span> <span class=nc>FruitCollection</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=kd>public</span> <span class=n>Iterator</span> <span class=nf>getIterator</span><span class=o>(</span><span class=n>String</span> <span class=n>type</span><span class=o>);</span>
</span></span><span class=line><span class=ln>14</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>
</span></span><span class=line><span class=ln>16</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>
</span></span><span class=line><span class=ln>19</span><span class=cl>        <span class=n>FruitCollectionImpl</span> <span class=n>collection</span> <span class=o>=</span> <span class=k>new</span> <span class=n>FruitCollectionImpl</span><span class=o>();</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>
</span></span><span class=line><span class=ln>21</span><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=n>Iterator</span> <span class=n>iter</span> <span class=o>=</span> <span class=n>collection</span><span class=o>.</span><span class=na>getIterator</span><span class=o>(</span><span class=s>&#34;COLOR&#34;</span><span class=o>);</span> <span class=n>iter</span><span class=o>.</span><span class=na>hasNext</span><span class=o>();</span> <span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>            <span class=n>Fruit</span> <span class=n>fruit</span> <span class=o>=</span> <span class=o>(</span><span class=n>Fruit</span><span class=o>)</span> <span class=n>iter</span><span class=o>.</span><span class=na>next</span><span class=o>();</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>fruit</span><span class=o>);</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;-------------------------------&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=n>Iterator</span> <span class=n>iter</span> <span class=o>=</span> <span class=n>collection</span><span class=o>.</span><span class=na>getIterator</span><span class=o>(</span><span class=s>&#34;TYPE&#34;</span><span class=o>);</span> <span class=n>iter</span><span class=o>.</span><span class=na>hasNext</span><span class=o>();</span> <span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>            <span class=n>Fruit</span> <span class=n>fruit</span> <span class=o>=</span> <span class=o>(</span><span class=n>Fruit</span><span class=o>)</span> <span class=n>iter</span><span class=o>.</span><span class=na>next</span><span class=o>();</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>fruit</span><span class=o>);</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>31</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>
</span></span><span class=line><span class=ln>33</span><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=ln>34</span><span class=cl><span class=nd>@Data</span>
</span></span><span class=line><span class=ln>35</span><span class=cl><span class=kd>class</span> <span class=nc>Fruit</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>    <span class=n>String</span> <span class=n>type</span><span class=o>;</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>    <span class=n>String</span> <span class=n>color</span><span class=o>;</span>
</span></span><span class=line><span class=ln>38</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>
</span></span><span class=line><span class=ln>40</span><span class=cl><span class=kd>class</span> <span class=nc>FruitCollectionImpl</span> <span class=kd>implements</span> <span class=n>FruitCollection</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>41</span><span class=cl>
</span></span><span class=line><span class=ln>42</span><span class=cl>    <span class=n>List</span><span class=o>&lt;</span><span class=n>Fruit</span><span class=o>&gt;</span> <span class=n>fruits</span><span class=o>;</span>
</span></span><span class=line><span class=ln>43</span><span class=cl>
</span></span><span class=line><span class=ln>44</span><span class=cl>    <span class=n>FruitCollectionImpl</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>45</span><span class=cl>        <span class=n>fruits</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=ln>46</span><span class=cl>        <span class=n>fruits</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Fruit</span><span class=o>(</span><span class=s>&#34;Banana&#34;</span><span class=o>,</span> <span class=s>&#34;Green&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=ln>47</span><span class=cl>        <span class=n>fruits</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Fruit</span><span class=o>(</span><span class=s>&#34;Apple&#34;</span><span class=o>,</span> <span class=s>&#34;Green&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=ln>48</span><span class=cl>        <span class=n>fruits</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Fruit</span><span class=o>(</span><span class=s>&#34;Banana&#34;</span><span class=o>,</span> <span class=s>&#34;Yellow&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=ln>49</span><span class=cl>        <span class=n>fruits</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Fruit</span><span class=o>(</span><span class=s>&#34;Cherry&#34;</span><span class=o>,</span> <span class=s>&#34;Red&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=ln>50</span><span class=cl>        <span class=n>fruits</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Fruit</span><span class=o>(</span><span class=s>&#34;Apple&#34;</span><span class=o>,</span> <span class=s>&#34;Red&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=ln>51</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>52</span><span class=cl>
</span></span><span class=line><span class=ln>53</span><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>54</span><span class=cl>    <span class=kd>public</span> <span class=n>Iterator</span> <span class=nf>getIterator</span><span class=o>(</span><span class=n>String</span> <span class=n>type</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>55</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>type</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=s>&#34;COLOR&#34;</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>56</span><span class=cl>            <span class=k>return</span> <span class=k>new</span> <span class=n>FruitIterator</span><span class=o>(</span><span class=s>&#34;COLOR&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>57</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>58</span><span class=cl>            <span class=k>return</span> <span class=k>new</span> <span class=n>FruitIterator</span><span class=o>(</span><span class=s>&#34;TYPE&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>59</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>60</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>61</span><span class=cl>
</span></span><span class=line><span class=ln>62</span><span class=cl>    <span class=kd>private</span> <span class=kd>class</span> <span class=nc>FruitIterator</span> <span class=kd>implements</span> <span class=n>Iterator</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>63</span><span class=cl>        <span class=kt>int</span> <span class=n>index</span><span class=o>;</span>
</span></span><span class=line><span class=ln>64</span><span class=cl>        <span class=n>List</span><span class=o>&lt;</span><span class=n>Fruit</span><span class=o>&gt;</span> <span class=n>sortedFruits</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;(</span><span class=n>fruits</span><span class=o>);</span>
</span></span><span class=line><span class=ln>65</span><span class=cl>
</span></span><span class=line><span class=ln>66</span><span class=cl>        <span class=n>FruitIterator</span><span class=o>(</span><span class=n>String</span> <span class=n>iteratorType</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>67</span><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>iteratorType</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=s>&#34;COLOR&#34;</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>68</span><span class=cl>                <span class=n>Collections</span><span class=o>.</span><span class=na>sort</span><span class=o>(</span><span class=n>sortedFruits</span><span class=o>,</span> <span class=n>Comparator</span><span class=o>.</span><span class=na>comparing</span><span class=o>(</span><span class=n>Fruit</span><span class=o>::</span><span class=n>getColor</span><span class=o>));</span>
</span></span><span class=line><span class=ln>69</span><span class=cl>            <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>70</span><span class=cl>                <span class=n>Collections</span><span class=o>.</span><span class=na>sort</span><span class=o>(</span><span class=n>sortedFruits</span><span class=o>,</span> <span class=n>Comparator</span><span class=o>.</span><span class=na>comparing</span><span class=o>(</span><span class=n>Fruit</span><span class=o>::</span><span class=n>getType</span><span class=o>));</span>
</span></span><span class=line><span class=ln>71</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>72</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>73</span><span class=cl>
</span></span><span class=line><span class=ln>74</span><span class=cl>        <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>75</span><span class=cl>        <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>hasNext</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>76</span><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>index</span> <span class=o>&lt;</span> <span class=n>sortedFruits</span><span class=o>.</span><span class=na>size</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>77</span><span class=cl>                <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=ln>78</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>79</span><span class=cl>            <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=ln>80</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>81</span><span class=cl>
</span></span><span class=line><span class=ln>82</span><span class=cl>        <span class=nd>@Override</span>
</span></span><span class=line><span class=ln>83</span><span class=cl>        <span class=kd>public</span> <span class=n>Object</span> <span class=nf>next</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>84</span><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=k>this</span><span class=o>.</span><span class=na>hasNext</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>85</span><span class=cl>                <span class=k>return</span> <span class=n>sortedFruits</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>index</span><span class=o>++);</span>
</span></span><span class=line><span class=ln>86</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>87</span><span class=cl>            <span class=k>return</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=ln>88</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>89</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>90</span><span class=cl>
</span></span><span class=line><span class=ln>91</span><span class=cl><span class=o>}</span></span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln> 1</span><span class=cl>Fruit<span class=o>(</span><span class=nv>type</span><span class=o>=</span>Banana, <span class=nv>color</span><span class=o>=</span>Green<span class=o>)</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>Fruit<span class=o>(</span><span class=nv>type</span><span class=o>=</span>Apple, <span class=nv>color</span><span class=o>=</span>Green<span class=o>)</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>Fruit<span class=o>(</span><span class=nv>type</span><span class=o>=</span>Cherry, <span class=nv>color</span><span class=o>=</span>Red<span class=o>)</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>Fruit<span class=o>(</span><span class=nv>type</span><span class=o>=</span>Apple, <span class=nv>color</span><span class=o>=</span>Red<span class=o>)</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>Fruit<span class=o>(</span><span class=nv>type</span><span class=o>=</span>Banana, <span class=nv>color</span><span class=o>=</span>Yellow<span class=o>)</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>-------------------------------
</span></span><span class=line><span class=ln> 7</span><span class=cl>Fruit<span class=o>(</span><span class=nv>type</span><span class=o>=</span>Apple, <span class=nv>color</span><span class=o>=</span>Green<span class=o>)</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>Fruit<span class=o>(</span><span class=nv>type</span><span class=o>=</span>Apple, <span class=nv>color</span><span class=o>=</span>Red<span class=o>)</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>Fruit<span class=o>(</span><span class=nv>type</span><span class=o>=</span>Banana, <span class=nv>color</span><span class=o>=</span>Green<span class=o>)</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>Fruit<span class=o>(</span><span class=nv>type</span><span class=o>=</span>Banana, <span class=nv>color</span><span class=o>=</span>Yellow<span class=o>)</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>Fruit<span class=o>(</span><span class=nv>type</span><span class=o>=</span>Cherry, <span class=nv>color</span><span class=o>=</span>Red<span class=o>)</span>
</span></span></code></pre></div><h3 id=11-memento-pattern>11. Memento Pattern</h3><p>Memento pattern is used to restore state of an object to a previous state.</p><p>Memento pattern involves three classes.</p><ul><li>Originator: The core class which holds a state. This state will need to be reverted to previous states. Think of this as your text editor text data.</li><li>Memento: The class has all the same attributes as Originator class and is used to hold values that will be restored back to the Originator class. Think of this as a temporary variable. Each time you click on save a memento is created and added to the list so that it can be reverted later.</li><li>CareTaker - This class takes ownership of creating and restoring memento.</li></ul><p>In the example below you can create a Originator object and change its state many times, only when you call the CareTaker.save method a memento gets created so that an undo operation later on can revert to that state. The list mementoList is private so only caretaker has access to the memento objects ensuring integrity of data.
Take special care if the attribute is immutable in the undoState method.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.demo.project62.memento</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.ArrayList</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.List</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.AllArgsConstructor</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.Data</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.NoArgsConstructor</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.RequiredArgsConstructor</span><span class=o>;</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>
</span></span><span class=line><span class=ln>15</span><span class=cl>        <span class=n>Originator</span> <span class=n>originator</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Originator</span><span class=o>();</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>        <span class=n>CareTaker</span> <span class=n>careTaker</span> <span class=o>=</span> <span class=k>new</span> <span class=n>CareTaker</span><span class=o>(</span><span class=n>originator</span><span class=o>);</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>        <span class=n>careTaker</span><span class=o>.</span><span class=na>save</span><span class=o>();</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>
</span></span><span class=line><span class=ln>19</span><span class=cl>        <span class=n>originator</span><span class=o>.</span><span class=na>setState</span><span class=o>(</span><span class=s>&#34;State #1&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>        <span class=n>originator</span><span class=o>.</span><span class=na>setState</span><span class=o>(</span><span class=s>&#34;State #2&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>        <span class=n>careTaker</span><span class=o>.</span><span class=na>save</span><span class=o>();</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>
</span></span><span class=line><span class=ln>23</span><span class=cl>        <span class=n>originator</span><span class=o>.</span><span class=na>setState</span><span class=o>(</span><span class=s>&#34;State #3&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>        <span class=n>careTaker</span><span class=o>.</span><span class=na>save</span><span class=o>();</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>
</span></span><span class=line><span class=ln>26</span><span class=cl>        <span class=n>originator</span><span class=o>.</span><span class=na>setState</span><span class=o>(</span><span class=s>&#34;State #4&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Current State: &#34;</span> <span class=o>+</span> <span class=n>originator</span><span class=o>.</span><span class=na>getState</span><span class=o>());</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>
</span></span><span class=line><span class=ln>29</span><span class=cl>        <span class=n>careTaker</span><span class=o>.</span><span class=na>undo</span><span class=o>();</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Current State: &#34;</span> <span class=o>+</span> <span class=n>originator</span><span class=o>.</span><span class=na>getState</span><span class=o>());</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>
</span></span><span class=line><span class=ln>32</span><span class=cl>        <span class=n>careTaker</span><span class=o>.</span><span class=na>undo</span><span class=o>();</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Current State: &#34;</span> <span class=o>+</span> <span class=n>originator</span><span class=o>.</span><span class=na>getState</span><span class=o>());</span>
</span></span><span class=line><span class=ln>34</span><span class=cl>
</span></span><span class=line><span class=ln>35</span><span class=cl>        <span class=n>careTaker</span><span class=o>.</span><span class=na>undo</span><span class=o>();</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>        <span class=n>careTaker</span><span class=o>.</span><span class=na>undo</span><span class=o>();</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>        <span class=n>careTaker</span><span class=o>.</span><span class=na>undo</span><span class=o>();</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Current State: &#34;</span> <span class=o>+</span> <span class=n>originator</span><span class=o>.</span><span class=na>getState</span><span class=o>());</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>40</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>41</span><span class=cl>
</span></span><span class=line><span class=ln>42</span><span class=cl><span class=nd>@Data</span>
</span></span><span class=line><span class=ln>43</span><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=ln>44</span><span class=cl><span class=kd>class</span> <span class=nc>Memento</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>45</span><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>state</span><span class=o>;</span>
</span></span><span class=line><span class=ln>46</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>47</span><span class=cl>
</span></span><span class=line><span class=ln>48</span><span class=cl><span class=nd>@Data</span>
</span></span><span class=line><span class=ln>49</span><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=ln>50</span><span class=cl><span class=nd>@NoArgsConstructor</span>
</span></span><span class=line><span class=ln>51</span><span class=cl><span class=kd>class</span> <span class=nc>Originator</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>52</span><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>state</span><span class=o>;</span>
</span></span><span class=line><span class=ln>53</span><span class=cl>
</span></span><span class=line><span class=ln>54</span><span class=cl>    <span class=kd>public</span> <span class=n>Memento</span> <span class=nf>saveState</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>55</span><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>Memento</span><span class=o>(</span><span class=k>this</span><span class=o>.</span><span class=na>state</span><span class=o>);</span>
</span></span><span class=line><span class=ln>56</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>57</span><span class=cl>
</span></span><span class=line><span class=ln>58</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>undoState</span><span class=o>(</span><span class=n>Memento</span> <span class=n>memento</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>59</span><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>state</span> <span class=o>=</span> <span class=n>memento</span><span class=o>.</span><span class=na>getState</span><span class=o>();</span>
</span></span><span class=line><span class=ln>60</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>61</span><span class=cl>
</span></span><span class=line><span class=ln>62</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>63</span><span class=cl>
</span></span><span class=line><span class=ln>64</span><span class=cl><span class=nd>@RequiredArgsConstructor</span>
</span></span><span class=line><span class=ln>65</span><span class=cl><span class=kd>class</span> <span class=nc>CareTaker</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>66</span><span class=cl>    <span class=kd>final</span> <span class=n>Originator</span> <span class=n>origin</span><span class=o>;</span>
</span></span><span class=line><span class=ln>67</span><span class=cl>    <span class=kd>private</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Memento</span><span class=o>&gt;</span> <span class=n>mementoList</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>Memento</span><span class=o>&gt;();</span>
</span></span><span class=line><span class=ln>68</span><span class=cl>
</span></span><span class=line><span class=ln>69</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>save</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>70</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>origin</span><span class=o>.</span><span class=na>getState</span><span class=o>()</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>71</span><span class=cl>            <span class=n>mementoList</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>origin</span><span class=o>.</span><span class=na>saveState</span><span class=o>());</span>
</span></span><span class=line><span class=ln>72</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>73</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>74</span><span class=cl>
</span></span><span class=line><span class=ln>75</span><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>undo</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>76</span><span class=cl>        <span class=k>if</span> <span class=o>(!</span><span class=n>mementoList</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>77</span><span class=cl>            <span class=n>origin</span><span class=o>.</span><span class=na>undoState</span><span class=o>(</span><span class=n>mementoList</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>mementoList</span><span class=o>.</span><span class=na>size</span><span class=o>()</span> <span class=o>-</span> <span class=n>1</span><span class=o>));</span>
</span></span><span class=line><span class=ln>78</span><span class=cl>            <span class=n>mementoList</span><span class=o>.</span><span class=na>remove</span><span class=o>(</span><span class=n>mementoList</span><span class=o>.</span><span class=na>size</span><span class=o>()</span> <span class=o>-</span> <span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=ln>79</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>80</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>81</span><span class=cl><span class=o>}</span></span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>Current State: State <span class=c1>#4</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>Current State: State <span class=c1>#3</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>Current State: State <span class=c1>#2</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>Current State: State <span class=c1>#2</span>
</span></span></code></pre></div><h2 id=differences>Differences</h2><h3 id=1-difference-between-bridge-pattern-and-adapter-pattern>1. Difference between bridge pattern and adapter pattern</h3><p>Bridge pattern is built upfront you break things at design time to make changes so that functionality can be added without tight coupling, adapter pattern works after code is already designed like legacy code.</p><h3 id=2-difference-between-mediator-pattern-and-observer-pattern>2. Difference between mediator pattern and observer pattern</h3><p>In observer, many objects are interested in the state change of one object. They are not interested in each other. So the relation is one to many. In mediator, many objects are interested to communicate many other objects. Here the relation is many to many.</p><h3 id=3-difference-between-chain-of-responsibility-and-command-pattern>3. Difference between chain of responsibility and command pattern</h3><p>In chain of responsibility pattern, the request is passed to potential receivers, whereas the command pattern uses a command object that encapsulates a request.</p><h3 id=4-difference-between-adapter-pattern-and-decorator-pattern>4. Difference between adapter pattern and decorator pattern</h3><p>Adapter pattern only adapts functionality, decorator adds more functionality.</p><h3 id=5-difference-between-adapter-pattern-and-facade-pattern>5. Difference between adapter pattern and facade pattern</h3><p>Adapter pattern just links two incompatible interfaces. A facade is used when one wants an easier or simpler interface to work with.</p></div><div class=post_comments><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//gitorko.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article><aside class=sidebar><section class=sidebar_inner><br><div class=search><input type=search class="search_field form_field" placeholder=Search... id=find autocomplete=off data-scope=post>
<label for=find class=search_label><svg class="icon"><title>search</title><use xlink:href="#search"/></svg></label><div class="search_results results"></div></div><h2 class=mt-4>Recent Posts</h2><ul class=flex-column><li><a href=https://gitorko.github.io/post/grokking-the-coding-interview/ class=nav-link title="Grokking the Coding Interview">Grokking the Coding Interview</a></li><li><a href=https://gitorko.github.io/post/spring-kotlin/ class=nav-link title="Spring Boot - Kotlin">Spring Boot - Kotlin</a></li><li><a href=https://gitorko.github.io/post/points-of-failure/ class=nav-link title="Points Of Failure in Distributed System">Points Of Failure in Distributed System</a></li><li><a href=https://gitorko.github.io/post/stock-exchange/ class=nav-link title="Stock Exchange - Price Time Priority Algorithm">Stock Exchange - Price Time Priority Algorithm</a></li><li><a href=https://gitorko.github.io/post/spring-ehcache/ class=nav-link title="Spring - EhCache">Spring - EhCache</a></li><li><a href=https://gitorko.github.io/post/spring-integration-basics/ class=nav-link title="Spring Integration - Basics">Spring Integration - Basics</a></li><li><a href=https://gitorko.github.io/post/spring-graphql/ class=nav-link title="Spring - GraphQL">Spring - GraphQL</a></li><li><a href=https://gitorko.github.io/post/learn-morse-code/ class=nav-link title="Learn Morse Code">Learn Morse Code</a></li></ul><div><h2 class="mt-4 taxonomy" id=categories-section>Categories</h2><nav class=tags_nav><a href=https://gitorko.github.io/categories/spring/ class="post_tag button button_translucent" title=spring>SPRING
<span class=button_tally>16</span></a>
<a href=https://gitorko.github.io/categories/design-pattern/ class="post_tag button button_translucent" title=design-pattern>DESIGN-PATTERN
<span class=button_tally>5</span></a>
<a href=https://gitorko.github.io/categories/clarity/ class="post_tag button button_translucent" title=clarity>CLARITY
<span class=button_tally>4</span></a>
<a href=https://gitorko.github.io/categories/jpa/ class="post_tag button button_translucent" title=jpa>JPA
<span class=button_tally>4</span></a>
<a href=https://gitorko.github.io/categories/rabbitmq/ class="post_tag button button_translucent" title=rabbitmq>RABBITMQ
<span class=button_tally>3</span></a>
<a href=https://gitorko.github.io/categories/jenkins/ class="post_tag button button_translucent" title=jenkins>JENKINS
<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/categories/kubernetes/ class="post_tag button button_translucent" title=kubernetes>KUBERNETES
<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/categories/messaging/ class="post_tag button button_translucent" title=messaging>MESSAGING
<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/categories/reports/ class="post_tag button button_translucent" title=reports>REPORTS
<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/categories/spring-reactor/ class="post_tag button button_translucent" title=spring-reactor>SPRING-REACTOR
<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/categories/algorithms/ class="post_tag button button_translucent" title=algorithms>ALGORITHMS
<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/angular/ class="post_tag button button_translucent" title=angular>ANGULAR
<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/caching/ class="post_tag button button_translucent" title=caching>CACHING
<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/completablefuture/ class="post_tag button button_translucent" title=completablefuture>COMPLETABLEFUTURE
<span class=button_tally>1</span></a><br><div class="post_tags_toggle button">All Categories</div><div class=post_tags><div class=tags_list><a href=https://gitorko.github.io/categories/algorithms/ class="post_tag button button_translucent" data-position=1 title=algorithms>ALGORITHMS<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/angular/ class="post_tag button button_translucent" data-position=1 title=angular>ANGULAR<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/caching/ class="post_tag button button_translucent" data-position=1 title=caching>CACHING<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/clarity/ class="post_tag button button_translucent" data-position=4 title=clarity>CLARITY<span class=button_tally>4</span></a>
<a href=https://gitorko.github.io/categories/completablefuture/ class="post_tag button button_translucent" data-position=1 title=completablefuture>COMPLETABLEFUTURE<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/design-pattern/ class="post_tag button button_translucent" data-position=5 title=design-pattern>DESIGN-PATTERN<span class=button_tally>5</span></a>
<a href=https://gitorko.github.io/categories/distributed-system/ class="post_tag button button_translucent" data-position=1 title=distributed-system>DISTRIBUTED-SYSTEM<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/docker/ class="post_tag button button_translucent" data-position=1 title=docker>DOCKER<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/drools/ class="post_tag button button_translucent" data-position=1 title=drools>DROOLS<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/ds/ class="post_tag button button_translucent" data-position=1 title=ds>DS<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/etl/ class="post_tag button button_translucent" data-position=1 title=etl>ETL<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/functional-programming/ class="post_tag button button_translucent" data-position=1 title=functional-programming>FUNCTIONAL-PROGRAMMING<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/grafana/ class="post_tag button button_translucent" data-position=1 title=grafana>GRAFANA<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/graphql/ class="post_tag button button_translucent" data-position=1 title=graphql>GRAPHQL<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/helm/ class="post_tag button button_translucent" data-position=1 title=helm>HELM<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/hugo/ class="post_tag button button_translucent" data-position=1 title=hugo>HUGO<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/java/ class="post_tag button button_translucent" data-position=1 title=java>JAVA<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/jdk/ class="post_tag button button_translucent" data-position=1 title=jdk>JDK<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/jenkins/ class="post_tag button button_translucent" data-position=2 title=jenkins>JENKINS<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/categories/jmeter/ class="post_tag button button_translucent" data-position=1 title=jmeter>JMETER<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/jobrunr/ class="post_tag button button_translucent" data-position=1 title=jobrunr>JOBRUNR<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/jpa/ class="post_tag button button_translucent" data-position=4 title=jpa>JPA<span class=button_tally>4</span></a>
<a href=https://gitorko.github.io/categories/kafka/ class="post_tag button button_translucent" data-position=1 title=kafka>KAFKA<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/kotlin/ class="post_tag button button_translucent" data-position=1 title=kotlin>KOTLIN<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/kubernetes/ class="post_tag button button_translucent" data-position=2 title=kubernetes>KUBERNETES<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/categories/leetcode/ class="post_tag button button_translucent" data-position=1 title=leetcode>LEETCODE<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/locking/ class="post_tag button button_translucent" data-position=1 title=locking>LOCKING<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/messaging/ class="post_tag button button_translucent" data-position=2 title=messaging>MESSAGING<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/categories/micrometer/ class="post_tag button button_translucent" data-position=1 title=micrometer>MICROMETER<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/modelmapper/ class="post_tag button button_translucent" data-position=1 title=modelmapper>MODELMAPPER<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/morse-code/ class="post_tag button button_translucent" data-position=1 title=morse-code>MORSE-CODE<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/optimistic-locking/ class="post_tag button button_translucent" data-position=1 title=optimistic-locking>OPTIMISTIC-LOCKING<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/prometheus/ class="post_tag button button_translucent" data-position=1 title=prometheus>PROMETHEUS<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/puzzles/ class="post_tag button button_translucent" data-position=1 title=puzzles>PUZZLES<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/querydsl/ class="post_tag button button_translucent" data-position=1 title=querydsl>QUERYDSL<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/r2dbc/ class="post_tag button button_translucent" data-position=1 title=r2dbc>R2DBC<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/rabbitmq/ class="post_tag button button_translucent" data-position=3 title=rabbitmq>RABBITMQ<span class=button_tally>3</span></a>
<a href=https://gitorko.github.io/categories/reactjs/ class="post_tag button button_translucent" data-position=1 title=reactjs>REACTJS<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/redis/ class="post_tag button button_translucent" data-position=1 title=redis>REDIS<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/reports/ class="post_tag button button_translucent" data-position=2 title=reports>REPORTS<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/categories/selenium/ class="post_tag button button_translucent" data-position=1 title=selenium>SELENIUM<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/sleuth/ class="post_tag button button_translucent" data-position=1 title=sleuth>SLEUTH<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/spring/ class="post_tag button button_translucent" data-position=16 title=spring>SPRING<span class=button_tally>16</span></a>
<a href=https://gitorko.github.io/categories/spring-integration/ class="post_tag button button_translucent" data-position=1 title=spring-integration>SPRING-INTEGRATION<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/spring-reactor/ class="post_tag button button_translucent" data-position=2 title=spring-reactor>SPRING-REACTOR<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/categories/spring-webflux/ class="post_tag button button_translucent" data-position=1 title=spring-webflux>SPRING-WEBFLUX<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/springboot/ class="post_tag button button_translucent" data-position=1 title=springboot>SPRINGBOOT<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/sse/ class="post_tag button button_translucent" data-position=1 title=sse>SSE<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/stock-exchange/ class="post_tag button button_translucent" data-position=1 title=stock-exchange>STOCK-EXCHANGE<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/system-design/ class="post_tag button button_translucent" data-position=1 title=system-design>SYSTEM-DESIGN<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/traefik/ class="post_tag button button_translucent" data-position=1 title=traefik>TRAEFIK<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/vault/ class="post_tag button button_translucent" data-position=1 title=vault>VAULT<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/visualization/ class="post_tag button button_translucent" data-position=1 title=visualization>VISUALIZATION<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/vscode/ class="post_tag button button_translucent" data-position=1 title=vscode>VSCODE<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/web/ class="post_tag button button_translucent" data-position=1 title=web>WEB<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/websocket/ class="post_tag button button_translucent" data-position=1 title=websocket>WEBSOCKET<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/categories/zipkin/ class="post_tag button button_translucent" data-position=1 title=zipkin>ZIPKIN<span class=button_tally>1</span></a><div class=tags_sort><span title="sort alphabetically">[A~Z]</span><span title="sort by count">[0~9]</span></div><span class=tags_hide><svg class="icon"><use xlink:href="#closeme"/></svg></span></div></div></nav></div><div><h2 class="mt-4 taxonomy" id=tags-section>Tags</h2><nav class=tags_nav><a href=https://gitorko.github.io/tags/spring/ class="post_tag button button_translucent" title=spring>SPRING
<span class=button_tally>17</span></a>
<a href=https://gitorko.github.io/tags/spring-boot/ class="post_tag button button_translucent" title=spring-boot>SPRING-BOOT
<span class=button_tally>13</span></a>
<a href=https://gitorko.github.io/tags/clarity/ class="post_tag button button_translucent" title=clarity>CLARITY
<span class=button_tally>5</span></a>
<a href=https://gitorko.github.io/tags/jpa/ class="post_tag button button_translucent" title=jpa>JPA
<span class=button_tally>5</span></a>
<a href=https://gitorko.github.io/tags/design-pattern/ class="post_tag button button_translucent" title=design-pattern>DESIGN-PATTERN
<span class=button_tally>4</span></a>
<a href=https://gitorko.github.io/tags/angular/ class="post_tag button button_translucent" title=angular>ANGULAR
<span class=button_tally>3</span></a>
<a href=https://gitorko.github.io/tags/webflux/ class="post_tag button button_translucent" title=webflux>WEBFLUX
<span class=button_tally>3</span></a>
<a href=https://gitorko.github.io/tags/bootstrap/ class="post_tag button button_translucent" title=bootstrap>BOOTSTRAP
<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/tags/chart.js/ class="post_tag button button_translucent" title=chart.js>CHART.JS
<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/tags/docker/ class="post_tag button button_translucent" title=docker>DOCKER
<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/tags/interview/ class="post_tag button button_translucent" title=interview>INTERVIEW
<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/tags/jmeter/ class="post_tag button button_translucent" title=jmeter>JMETER
<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/tags/jwt/ class="post_tag button button_translucent" title=jwt>JWT
<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/tags/kubernetes/ class="post_tag button button_translucent" title=kubernetes>KUBERNETES
<span class=button_tally>2</span></a><br><div class="post_tags_toggle button">All Tags</div><div class=post_tags><div class=tags_list><a href=https://gitorko.github.io/tags/algorithms/ class="post_tag button button_translucent" data-position=1 title=algorithms>ALGORITHMS<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/amqp/ class="post_tag button button_translucent" data-position=1 title=amqp>AMQP<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/angular/ class="post_tag button button_translucent" data-position=3 title=angular>ANGULAR<span class=button_tally>3</span></a>
<a href=https://gitorko.github.io/tags/apache-superset/ class="post_tag button button_translucent" data-position=1 title=apache-superset>APACHE-SUPERSET<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/azul/ class="post_tag button button_translucent" data-position=1 title=azul>AZUL<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/bootstrap/ class="post_tag button button_translucent" data-position=2 title=bootstrap>BOOTSTRAP<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/tags/chart.js/ class="post_tag button button_translucent" data-position=2 title=chart.js>CHART.JS<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/tags/checkstyle/ class="post_tag button button_translucent" data-position=1 title=checkstyle>CHECKSTYLE<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/clarity/ class="post_tag button button_translucent" data-position=5 title=clarity>CLARITY<span class=button_tally>5</span></a>
<a href=https://gitorko.github.io/tags/code-coverage/ class="post_tag button button_translucent" data-position=1 title=code-coverage>CODE-COVERAGE<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/coding/ class="post_tag button button_translucent" data-position=1 title=coding>CODING<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/completable-future/ class="post_tag button button_translucent" data-position=1 title=completable-future>COMPLETABLE-FUTURE<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/correto/ class="post_tag button button_translucent" data-position=1 title=correto>CORRETO<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/data-structure/ class="post_tag button button_translucent" data-position=1 title=data-structure>DATA-STRUCTURE<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/datagrid/ class="post_tag button button_translucent" data-position=1 title=datagrid>DATAGRID<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/design-pattern/ class="post_tag button button_translucent" data-position=4 title=design-pattern>DESIGN-PATTERN<span class=button_tally>4</span></a>
<a href=https://gitorko.github.io/tags/docker/ class="post_tag button button_translucent" data-position=2 title=docker>DOCKER<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/tags/drools/ class="post_tag button button_translucent" data-position=1 title=drools>DROOLS<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/ehcache/ class="post_tag button button_translucent" data-position=1 title=ehcache>EHCACHE<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/enterprise-integration-patterns/ class="post_tag button button_translucent" data-position=1 title=enterprise-integration-patterns>ENTERPRISE-INTEGRATION-PATTERNS<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/etl/ class="post_tag button button_translucent" data-position=1 title=etl>ETL<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/failure/ class="post_tag button button_translucent" data-position=1 title=failure>FAILURE<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/flash-sale/ class="post_tag button button_translucent" data-position=1 title=flash-sale>FLASH-SALE<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/freemarker/ class="post_tag button button_translucent" data-position=1 title=freemarker>FREEMARKER<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/future/ class="post_tag button button_translucent" data-position=1 title=future>FUTURE<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/google-chart/ class="post_tag button button_translucent" data-position=1 title=google-chart>GOOGLE-CHART<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/grafana/ class="post_tag button button_translucent" data-position=1 title=grafana>GRAFANA<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/graphql/ class="post_tag button button_translucent" data-position=1 title=graphql>GRAPHQL<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/helm/ class="post_tag button button_translucent" data-position=1 title=helm>HELM<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/hot-swap/ class="post_tag button button_translucent" data-position=1 title=hot-swap>HOT-SWAP<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/hsqldb/ class="post_tag button button_translucent" data-position=1 title=hsqldb>HSQLDB<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/hugo/ class="post_tag button button_translucent" data-position=1 title=hugo>HUGO<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/index/ class="post_tag button button_translucent" data-position=1 title=index>INDEX<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/interview/ class="post_tag button button_translucent" data-position=2 title=interview>INTERVIEW<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/tags/jasper-report/ class="post_tag button button_translucent" data-position=1 title=jasper-report>JASPER-REPORT<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/java-puzzles/ class="post_tag button button_translucent" data-position=1 title=java-puzzles>JAVA-PUZZLES<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/java8/ class="post_tag button button_translucent" data-position=1 title=java8>JAVA8<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/jenkins/ class="post_tag button button_translucent" data-position=1 title=jenkins>JENKINS<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/jib/ class="post_tag button button_translucent" data-position=1 title=jib>JIB<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/jmeter/ class="post_tag button button_translucent" data-position=2 title=jmeter>JMETER<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/tags/jmx/ class="post_tag button button_translucent" data-position=1 title=jmx>JMX<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/jobrunr/ class="post_tag button button_translucent" data-position=1 title=jobrunr>JOBRUNR<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/jpa/ class="post_tag button button_translucent" data-position=5 title=jpa>JPA<span class=button_tally>5</span></a>
<a href=https://gitorko.github.io/tags/jwt/ class="post_tag button button_translucent" data-position=2 title=jwt>JWT<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/tags/kafka/ class="post_tag button button_translucent" data-position=1 title=kafka>KAFKA<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/kafka-stream/ class="post_tag button button_translucent" data-position=1 title=kafka-stream>KAFKA-STREAM<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/kotlin/ class="post_tag button button_translucent" data-position=1 title=kotlin>KOTLIN<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/kubernetes/ class="post_tag button button_translucent" data-position=2 title=kubernetes>KUBERNETES<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/tags/lambda/ class="post_tag button button_translucent" data-position=1 title=lambda>LAMBDA<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/micrometer/ class="post_tag button button_translucent" data-position=1 title=micrometer>MICROMETER<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/model-mapper/ class="post_tag button button_translucent" data-position=1 title=model-mapper>MODEL-MAPPER<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/mongodb/ class="post_tag button button_translucent" data-position=1 title=mongodb>MONGODB<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/morse-code/ class="post_tag button button_translucent" data-position=1 title=morse-code>MORSE-CODE<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/openapi/ class="post_tag button button_translucent" data-position=1 title=openapi>OPENAPI<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/openjdk/ class="post_tag button button_translucent" data-position=1 title=openjdk>OPENJDK<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/optimistic-locking/ class="post_tag button button_translucent" data-position=2 title=optimistic-locking>OPTIMISTIC-LOCKING<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/tags/order-matching/ class="post_tag button button_translucent" data-position=1 title=order-matching>ORDER-MATCHING<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/pagination/ class="post_tag button button_translucent" data-position=1 title=pagination>PAGINATION<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/pessimistic-locking/ class="post_tag button button_translucent" data-position=1 title=pessimistic-locking>PESSIMISTIC-LOCKING<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/pipeline/ class="post_tag button button_translucent" data-position=1 title=pipeline>PIPELINE<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/postgres/ class="post_tag button button_translucent" data-position=1 title=postgres>POSTGRES<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/price-time-algorithm/ class="post_tag button button_translucent" data-position=1 title=price-time-algorithm>PRICE-TIME-ALGORITHM<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/prometheus/ class="post_tag button button_translucent" data-position=1 title=prometheus>PROMETHEUS<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/querydsl/ class="post_tag button button_translucent" data-position=2 title=querydsl>QUERYDSL<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/tags/r2dbc/ class="post_tag button button_translucent" data-position=1 title=r2dbc>R2DBC<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/rabbitmq/ class="post_tag button button_translucent" data-position=2 title=rabbitmq>RABBITMQ<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/tags/rancher/ class="post_tag button button_translucent" data-position=1 title=rancher>RANCHER<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/rate-limit/ class="post_tag button button_translucent" data-position=1 title=rate-limit>RATE-LIMIT<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/reactive-jdbc/ class="post_tag button button_translucent" data-position=1 title=reactive-jdbc>REACTIVE-JDBC<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/reactjs/ class="post_tag button button_translucent" data-position=1 title=reactjs>REACTJS<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/redis/ class="post_tag button button_translucent" data-position=2 title=redis>REDIS<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/tags/resilience4j/ class="post_tag button button_translucent" data-position=1 title=resilience4j>RESILIENCE4J<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/rpc/ class="post_tag button button_translucent" data-position=1 title=rpc>RPC<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/selenium/ class="post_tag button button_translucent" data-position=1 title=selenium>SELENIUM<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/server-driven/ class="post_tag button button_translucent" data-position=1 title=server-driven>SERVER-DRIVEN<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/server-sent-event/ class="post_tag button button_translucent" data-position=1 title=server-sent-event>SERVER-SENT-EVENT<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/sleuth/ class="post_tag button button_translucent" data-position=1 title=sleuth>SLEUTH<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/spring/ class="post_tag button button_translucent" data-position=17 title=spring>SPRING<span class=button_tally>17</span></a>
<a href=https://gitorko.github.io/tags/spring-boot/ class="post_tag button button_translucent" data-position=13 title=spring-boot>SPRING-BOOT<span class=button_tally>13</span></a>
<a href=https://gitorko.github.io/tags/spring-reactor/ class="post_tag button button_translucent" data-position=1 title=spring-reactor>SPRING-REACTOR<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/spring-security/ class="post_tag button button_translucent" data-position=2 title=spring-security>SPRING-SECURITY<span class=button_tally>2</span></a>
<a href=https://gitorko.github.io/tags/springboot/ class="post_tag button button_translucent" data-position=1 title=springboot>SPRINGBOOT<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/sse/ class="post_tag button button_translucent" data-position=1 title=sse>SSE<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/state-machine/ class="post_tag button button_translucent" data-position=1 title=state-machine>STATE-MACHINE<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/stock-exchange/ class="post_tag button button_translucent" data-position=1 title=stock-exchange>STOCK-EXCHANGE<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/streams/ class="post_tag button button_translucent" data-position=1 title=streams>STREAMS<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/system-design/ class="post_tag button button_translucent" data-position=1 title=system-design>SYSTEM-DESIGN<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/telepresence/ class="post_tag button button_translucent" data-position=1 title=telepresence>TELEPRESENCE<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/thymeleaf/ class="post_tag button button_translucent" data-position=1 title=thymeleaf>THYMELEAF<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/traefik/ class="post_tag button button_translucent" data-position=1 title=traefik>TRAEFIK<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/visualization/ class="post_tag button button_translucent" data-position=1 title=visualization>VISUALIZATION<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/vscode/ class="post_tag button button_translucent" data-position=1 title=vscode>VSCODE<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/webflux/ class="post_tag button button_translucent" data-position=3 title=webflux>WEBFLUX<span class=button_tally>3</span></a>
<a href=https://gitorko.github.io/tags/websocket/ class="post_tag button button_translucent" data-position=1 title=websocket>WEBSOCKET<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/xenon/ class="post_tag button button_translucent" data-position=1 title=xenon>XENON<span class=button_tally>1</span></a>
<a href=https://gitorko.github.io/tags/zipkin/ class="post_tag button button_translucent" data-position=1 title=zipkin>ZIPKIN<span class=button_tally>1</span></a><div class=tags_sort><span title="sort alphabetically">[A~Z]</span><span title="sort by count">[0~9]</span></div><span class=tags_hide><svg class="icon"><use xlink:href="#closeme"/></svg></span></div></div></nav></div></section></aside></div></main><svg width="0" height="0" class="hidden"><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="facebook"><path d="M437 0H75C33.648.0.0 33.648.0 75v362c0 41.352 33.648 75 75 75h151V331h-60v-90h60v-61c0-49.629 40.371-90 90-90h91v90h-91v61h91l-15 90h-76v181h121c41.352.0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zm0 0"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.001 18.001" id="twitter"><path d="M15.891 4.013c.808-.496 1.343-1.173 1.605-2.034a8.68 8.68.0 01-2.351.861c-.703-.756-1.593-1.14-2.66-1.14-1.043.0-1.924.366-2.643 1.078A3.56 3.56.0 008.766 5.383c0 .309.039.585.117.819-3.076-.105-5.622-1.381-7.628-3.837-.34.601-.51 1.213-.51 1.846.0 1.301.549 2.332 1.645 3.089-.625-.053-1.176-.211-1.645-.47.0.929.273 1.705.82 2.388a3.623 3.623.0 002.115 1.291c-.312.08-.641.118-.979.118-.312.0-.533-.026-.664-.083.23.757.664 1.371 1.291 1.841a3.652 3.652.0 002.152.743C4.148 14.173 2.625 14.69.902 14.69c-.422.0-.721-.006-.902-.038 1.697 1.102 3.586 1.649 5.676 1.649 2.139.0 4.029-.542 5.674-1.626 1.645-1.078 2.859-2.408 3.639-3.974a10.77 10.77.0 001.172-4.892v-.468a7.788 7.788.0 001.84-1.921 8.142 8.142.0 01-2.11.593z"/></symbol><symbol aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="mail"><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V4e2c0 26.5-21.5 48-48 48H48c-26.5.0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5.0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="calendar"><path d="M452 40h-24V0h-40v40H124V0H84v40H60C26.916 40 0 66.916.0 1e2v352c0 33.084 26.916 60 60 60h392c33.084.0 60-26.916 60-60V1e2c0-33.084-26.916-60-60-60zm20 412c0 11.028-8.972 20-20 20H60c-11.028.0-20-8.972-20-20V188h432v264zm0-304H40v-48c0-11.028 8.972-20 20-20h24v40h40V80h264v40h40V80h24c11.028.0 20 8.972 20 20v48z"/><path d="M76 230h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 310h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 390h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80-80h40v40h-40z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="github"><path d="M255.968 5.329C114.624 5.329.0 120.401.0 262.353c0 113.536 73.344 209.856 175.104 243.872 12.8 2.368 17.472-5.568 17.472-12.384.0-6.112-.224-22.272-.352-43.712-71.2 15.52-86.24-34.464-86.24-34.464-11.616-29.696-28.416-37.6-28.416-37.6-23.264-15.936 1.728-15.616 1.728-15.616 25.696 1.824 39.2 26.496 39.2 26.496 22.848 39.264 59.936 27.936 74.528 21.344 2.304-16.608 8.928-27.936 16.256-34.368-56.832-6.496-116.608-28.544-116.608-127.008.0-28.064 9.984-51.008 26.368-68.992-2.656-6.496-11.424-32.64 2.496-68 0 0 21.504-6.912 70.4 26.336 20.416-5.696 42.304-8.544 64.096-8.64 21.728.128 43.648 2.944 64.096 8.672 48.864-33.248 70.336-26.336 70.336-26.336 13.952 35.392 5.184 61.504 2.56 68 16.416 17.984 26.304 40.928 26.304 68.992.0 98.72-59.84 120.448-116.864 126.816 9.184 7.936 17.376 23.616 17.376 47.584.0 34.368-.32 62.08-.32 70.496.0 6.88 4.608 14.88 17.6 12.352C438.72 472.145 512 375.857 512 262.353 512 120.401 397.376 5.329 255.968 5.329z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 212 212" id="gitlab"><path d="M12.3 74.7h54L43.3 3c-1-3.6-6.4-3.6-7.6.0L12.3 74.8z"/><path d="M12.3 74.7.5 111c-1 3.2.0 6.8 3 8.8l101.6 74-92.5-119z"/><path d="M105 193.7l-38.6-119h-54l92.7 119z"/><path d="M105 193.7l38.7-119H66.4l38.7 119z"/><path d="M105 193.7l38.7-119H198l-93 119z"/><path d="M198 74.7l11.6 36.2c1 3 0 6.6-3 8.6l-101.5 74 93-119z"/><path d="M198 74.7h-54.3L167 3c1.2-3.6 6.4-3.6 7.6.0L198 74.8z"/></symbol><symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="rss"><circle cx="3.429" cy="20.571" r="3.429"/><path d="M11.429 24h4.57C15.999 15.179 8.821 8.001.0 8v4.572c6.302.001 11.429 5.126 11.429 11.428z"/><path d="M24 24C24 10.766 13.234.0.0.0v4.571c10.714.0 19.43 8.714 19.43 19.429z"/></symbol><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="linkedin"><path d="M437 0H75C33.648.0.0 33.648.0 75v362c0 41.352 33.648 75 75 75h362c41.352.0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zM181 406h-60V196h60zm0-240h-60v-60h60zm210 240h-60V286c0-16.54-13.46-30-30-30s-30 13.46-30 30v120h-60V196h60v11.309C286.719 202.422 296.93 196 316 196c40.691.043 75 36.547 75 79.688zm0 0"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612" id="to-top"><path d="M604.501 440.509 325.398 134.956c-5.331-5.357-12.423-7.627-19.386-7.27-6.989-.357-14.056 1.913-19.387 7.27L7.499 440.509c-9.999 10.024-9.999 26.298.0 36.323s26.223 10.024 36.222.0l262.293-287.164L568.28 476.832c9.999 10.024 26.222 10.024 36.221.0 9.999-10.023 9.999-26.298.0-36.323z"/></symbol><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="carly"><path d="M504.971 239.029 448 182.059V84c0-46.317-37.682-84-84-84h-44c-13.255.0-24 10.745-24 24s10.745 24 24 24h44c19.851.0 36 16.149 36 36v108c0 6.365 2.529 12.47 7.029 16.971L454.059 256l-47.029 47.029A24.002 24.002.0 004e2 320v108c0 19.851-16.149 36-36 36h-44c-13.255.0-24 10.745-24 24s10.745 24 24 24h44c46.318.0 84-37.683 84-84v-98.059l56.971-56.971c9.372-9.372 9.372-24.568.0-33.941zM112 192V84c0-19.851 16.149-36 36-36h44c13.255.0 24-10.745 24-24S205.255.0 192 0h-44c-46.318.0-84 37.683-84 84v98.059l-56.971 56.97c-9.373 9.373-9.373 24.568.0 33.941L64 329.941V428c0 46.317 37.682 84 84 84h44c13.255.0 24-10.745 24-24s-10.745-24-24-24h-44c-19.851.0-36-16.149-36-36V320c0-6.365-2.529-12.47-7.029-16.971L57.941 256l47.029-47.029A24.002 24.002.0 00112 192z"/></symbol><symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="copy"><path d="M23 2.75A2.75 2.75.0 0020.25.0H8.75A2.75 2.75.0 006 2.75v13.5A2.75 2.75.0 008.75 19h11.5A2.75 2.75.0 0023 16.25zM18.25 14.5h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5zm0-3h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5zm0-3h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5z"/><path d="M8.75 20.5A4.255 4.255.0 014.5 16.25V2.75c0-.086.02-.166.025-.25H3.75A2.752 2.752.0 001 5.25v16A2.752 2.752.0 003.75 24h12a2.752 2.752.0 002.75-2.75v-.75z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.001 512.001" id="closeme"><path d="M284.286 256.002 506.143 34.144c7.811-7.811 7.811-20.475.0-28.285-7.811-7.81-20.475-7.811-28.285.0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285.0-7.81 7.811-7.811 20.475.0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475.0 28.285a19.938 19.938.0 0014.143 5.857 19.94 19.94.0 0014.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475.0-28.285L284.286 256.002z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="open-menu"><path d="M492 236H20c-11.046.0-20 8.954-20 20s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20zm0-160H20C8.954 76 0 84.954.0 96s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20zm0 320H20c-11.046.0-20 8.954-20 20s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="instagram"><path d="M12 2.163c3.204.0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849.0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204.0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849.0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741.0 8.333.014 7.053.072c-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.668.072 4.948c.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24s3.668-.014 4.948-.072c4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948s-.014-3.667-.072-4.947c-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403.0-6.162 2.759-6.162 6.162S8.597 18.163 12 18.163s6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zM12 16c-2.209.0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796.0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795.0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="youtube"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23.0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23.0C23.512 20.55 23.971 18.196 24 12c-.029-6.185-.484-8.549-4.385-8.816zM9 16V8l8 3.993L9 16z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="stackoverflow"><path d="M21 27v-8h3v11H0V19h3v8h18z"/><path d="M17.1.2 15 1.8l7.9 10.6 2.1-1.6L17.1.2zm3.7 14.7L10.6 6.4l1.7-2 10.2 8.5-1.7 2zM7.2 12.3l12 5.6 1.1-2.4-12-5.6-1.1 2.4zm-1.8 6.8 13.56 1.96.17-2.38-13.26-2.55-.47 2.97zM19 25H5v-3h14v3z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="xing"><path d="M18.188.0c-.517.0-.741.325-.927.66.0.0-7.455 13.224-7.702 13.657.015.024 4.919 9.023 4.919 9.023.17.308.436.66.967.66h3.454c.211.0.375-.078.463-.22.089-.151.089-.346-.009-.536l-4.879-8.916c-.004-.006-.004-.016.0-.022L22.139.756c.095-.191.097-.387.006-.535C22.056.078 21.894.0 21.686.0h-3.498zM3.648 4.74c-.211.0-.385.074-.473.216-.09.149-.078.339.02.531l2.34 4.05c.004.01.004.016.0.021L1.86 16.051c-.099.188-.093.381.0.529.085.142.239.234.45.234h3.461c.518.0.766-.348.945-.667l3.734-6.609-2.378-4.155c-.172-.315-.434-.659-.962-.659H3.648v.016z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 71 55" id="discord"><path d="M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527.41542 45.5603.39851 45.468.440769 45.4204.525289 44.7963 1.6353 44.105 3.0834 43.6209 4.2216c-5.4572-.817-10.8864-.817-16.2317.0C26.905 3.0581 26.1886 1.6353 25.5617.525289 25.5141.443589 25.4218.40133 25.3294.41542c-5.071.87338-9.9237 2.40318-14.4518 4.48238C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795 1.57795 18.7309-.943561 32.1443.293408 45.3914.299005 45.4562.335386 45.5182.385761 45.5576 6.45866 50.0174 12.3413 52.7249 18.1147 54.5195 18.2071 54.5477 18.305 54.5139 18.3638 54.4378 19.7295 52.5728 20.9469 50.6063 21.9907 48.5383 22.0523 48.4172 21.9935 48.2735 21.8676 48.2256 19.9366 47.4931 18.0979 46.6 16.3292 45.5858 16.1893 45.5041 16.1781 45.304 16.3068 45.2082 16.679 44.9293 17.0513 44.6391 17.4067 44.3461 17.471 44.2926 17.5606 44.2813 17.6362 44.3151c11.6196 5.3051 24.1992 5.3051 35.6817.0C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433 53.9057 44.6363 54.2779 44.9293 54.6529 45.2082 54.7816 45.304 54.7732 45.5041 54.6333 45.5858c-1.7687 1.0339-3.6074 1.9073-5.5412 2.637C48.9662 48.2707 48.9102 48.4172 48.9718 48.5383c1.0662 2.0651 2.2836 4.0316 3.6241 5.8967C52.6519 54.5139 52.7526 54.5477 52.845 54.5195c5.8014-1.7946 11.684-4.5021 17.7569-8.9619C70.6551 45.5182 70.6887 45.459 70.6943 45.3942 72.1747 30.0791 68.2147 16.7757 60.1968 4.9823 60.1772 4.9429 60.1437 4.9147 60.1045 4.8978zM23.7259 37.3253c-3.4983.0-6.3808-3.2117-6.3808-7.156s2.8266-7.156 6.3808-7.156c3.5821.0 6.4367 3.2399 6.3807 7.156.0 3.9443-2.8266 7.156-6.3807 7.156zm23.5919.0c-3.4982.0-6.3807-3.2117-6.3807-7.156s2.8265-7.156 6.3807-7.156c3.5822.0 6.4367 3.2399 6.3808 7.156.0 3.9443-2.7986 7.156-6.3808 7.156z"/></symbol></svg><footer class=footer><div class="footer_inner wrap pale"><img src=https://gitorko.github.io/images/logo.svg class="icon icon_2 transparent" alt=GitOrko><p>Copyright&nbsp;<span class=year></span>&nbsp;GITORKO. All Rights Reserved</p><a class=to_top href=#documentTop><svg class="icon"><title>to-top</title><use xlink:href="#to-top"/></svg></a></div></footer><script type=text/javascript src=https://gitorko.github.io/en/js/bundle.916713af316e781a9177cd866fbe6e5bdc74617a387c1b7576f03afca70cfbe7d3d9b76ef311fbec6a2f92e523479573d41577c92936fbdb1b3638cec3e0e4e6.js integrity="sha512-kWcTrzFueBqRd82Gb75uW9x0YXo4fBt1dvA6/KcM++fT2bdu8xH77GovkuUjR5Vz1BV3ySk2+9sbNjjOw+Dk5g==" crossorigin=anonymous></script>
<script src=https://gitorko.github.io/js/search.min.df4d84e4983f0c71dd495e07a09815d920553c3ddf3d0767801c73373573aa17e1b489e4453272dbf4ce2a38a3d01a10b170744e50dd6bec85a598221867ba9a.js></script></body></html>